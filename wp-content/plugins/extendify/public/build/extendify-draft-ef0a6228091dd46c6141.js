(()=>{var e={250:(e,t,n)=>{"use strict";var r=n(196),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),o((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},139:(e,t,n)=>{"use strict";var r=n(196),i=n(688),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,a=n)}var o,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var m=o(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=m}),[m]),u(m),m}},688:(e,t,n)=>{"use strict";e.exports=n(250)},798:(e,t,n)=>{"use strict";e.exports=n(139)},196:e=>{"use strict";e.exports=window.React},967:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(196);const t=window.wp.components,r=window.wp.editPost,i=window.wp.hooks,s=window.wp.i18n,o=window.wp.plugins,a=window.wp.data,l=window.wp.element,c=window.wp.blocks,u=({completion:t})=>{const n=(0,c.pasteHandler)({plainText:t}),r=(0,l.useRef)();return(0,e.createElement)("div",{ref:r,style:{fontSize:"clamp(1em 1em 1em)"},className:"completion relative px-5 pt-4 break-words max-h-60 overflow-y-auto","data-test":"completion-input"},Array.isArray(n)?(0,e.createElement)("div",{dangerouslySetInnerHTML:{__html:(0,c.serialize)(n)}}):(0,e.createElement)("div",{dangerouslySetInnerHTML:{__html:n}}))},d=window.wp.primitives,h=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})),m=({disabled:n,setInputText:r,setReady:i})=>{const o=[{label:(0,s.__)("A paragraph …","extendify-local"),onClickText:(0,s.__)("Write a paragraph about","extendify-local")},{label:(0,s.__)("Blog post …","extendify-local"),onClickText:(0,s.__)("Write a blog post about","extendify-local")},{label:(0,s.__)("An informative article …","extendify-local"),onClickText:(0,s.__)("Write an informative article about","extendify-local")},{label:(0,s.__)("Headline …","extendify-local"),onClickText:(0,s.__)("Write a headline for","extendify-local")},{label:(0,s.__)("List …","extendify-local"),onClickText:(0,s.__)("Write a list of","extendify-local")}];return(0,e.createElement)(t.MenuGroup,null,o.map((({label:s,onClickText:o})=>(0,e.createElement)(t.MenuItem,{key:s,onClick:()=>(r(`${o} `),void i(!1)),disabled:n,icon:h,iconPosition:"left"},s))))},p=(0,l.forwardRef)((function({icon:e,size:t=24,...n},r){return(0,l.cloneElement)(e,{width:t,height:t,...n,ref:r})})),f=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4zm.8-4l.7.7 2-2V12h1V9.2l2 2 .7-.7-2-2H12v-1H9.2l2-2-.7-.7-2 2V4h-1v2.8l-2-2-.7.7 2 2H4v1h2.8l-2 2z"})),g=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M6.08 10.103h2.914L9.657 12h1.417L8.23 4H6.846L4 12h1.417l.663-1.897Zm1.463-4.137.994 2.857h-2l1.006-2.857ZM11 16H4v-1.5h7V16Zm1 0h8v-1.5h-8V16Zm-4 4H4v-1.5h4V20Zm7-1.5V20H9v-1.5h6Z"})),y=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"m9.99609 14v-.2251l.00391.0001v6.225h1.5v-14.5h2.5v14.5h1.5v-14.5h3v-1.5h-8.50391c-2.76142 0-5 2.23858-5 5 0 2.7614 2.23858 5 5 5z"})),v=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M4 6h12V4.5H4V6Zm16 4.5H4V9h16v1.5ZM4 15h16v-1.5H4V15Zm0 4.5h16V18H4v1.5Z"})),x=()=>{const{getBlockInsertionPoint:e}=(0,a.useSelect)((e=>e("core/block-editor")),[]),{toggleBlockHighlight:t,showInsertionPoint:n,hideInsertionPoint:r}=(0,a.useDispatch)("core/block-editor");return{toggleHighlight:(e,{isHighlighted:n})=>{t(e[0],n)},toggleInsertionPoint:({isVisible:t})=>{if(!t)return void r();const{rootClientId:i,index:s}=e();n(i,s)}}},w=window.wp.blockEditor,E=()=>{const{getSelectedBlockClientIds:e,getBlocksByClientId:t}=(0,a.useSelect)((e=>e(w.store)),[]),n=e();return{selectedText:(0,l.useCallback)((()=>t(n).map((({attributes:e})=>e.content)).join("\n\n")),[t,n])()}},b=((0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M8.79508 15.8769L4.62508 11.7069L3.20508 13.1169L8.79508 18.7069L20.7951 6.70687L19.3851 5.29688L8.79508 15.8769Z"})),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M14 17H4V19H14V17ZM20 9H4V11H20V9ZM4 15H20V13H4V15ZM4 5V7H20V5H4Z"})),(0,e.createElement)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M19 9L20.25 6.25L23 5L20.25 3.75L19 1L17.75 3.75L15 5L17.75 6.25L19 9Z"}),(0,e.createElement)("path",{d:"M19 15L17.75 17.75L15 19L17.75 20.25L19 23L20.25 20.25L23 19L20.25 17.75L19 15Z"}),(0,e.createElement)("path",{d:"M11.5 9.5L9 4L6.5 9.5L1 12L6.5 14.5L9 20L11.5 14.5L17 12L11.5 9.5ZM9.99 12.99L9 15.17L8.01 12.99L5.83 12L8.01 11.01L9 8.83L9.99 11.01L12.17 12L9.99 12.99Z"}))),S=((0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M12 14.5C13.66 14.5 15 13.16 15 11.5V5.5C15 3.84 13.66 2.5 12 2.5C10.34 2.5 9 3.84 9 5.5V11.5C9 13.16 10.34 14.5 12 14.5Z"}),(0,e.createElement)("path",{d:"M17 11.5C17 14.26 14.76 16.5 12 16.5C9.24 16.5 7 14.26 7 11.5H5C5 15.03 7.61 17.93 11 18.42V21.5H13V18.42C16.39 17.93 19 15.03 19 11.5H17Z"})),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M2.99902 21.0025H6.74902L17.809 9.9425L14.059 6.1925L2.99902 17.2525V21.0025ZM4.99902 18.0825L14.059 9.0225L14.979 9.9425L5.91902 19.0025H4.99902V18.0825Z"}),(0,e.createElement)("path",{d:"M18.369 3.2925C17.979 2.9025 17.349 2.9025 16.959 3.2925L15.129 5.1225L18.879 8.8725L20.709 7.0425C21.099 6.6525 21.099 6.0225 20.709 5.6325L18.369 3.2925Z"})),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M4 9H20V11H4V9ZM4 13H14V15H4V13Z"})),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M19.5005 7.5L20.4405 5.44L22.5005 4.5L20.4405 3.56L19.5005 1.5L18.5605 3.56L16.5005 4.5L18.5605 5.44L19.5005 7.5Z"}),(0,e.createElement)("path",{d:"M8.00055 7.5L8.94055 5.44L11.0005 4.5L8.94055 3.56L8.00055 1.5L7.06055 3.56L5.00055 4.5L7.06055 5.44L8.00055 7.5Z"}),(0,e.createElement)("path",{d:"M19.5005 13L18.5605 15.06L16.5005 16L18.5605 16.94L19.5005 19L20.4405 16.94L22.5005 16L20.4405 15.06L19.5005 13Z"}),(0,e.createElement)("path",{d:"M17.2105 9.62L14.3805 6.79C14.1805 6.6 13.9305 6.5 13.6705 6.5C13.4105 6.5 13.1605 6.6 12.9605 6.79L1.79055 17.96C1.40055 18.35 1.40055 18.98 1.79055 19.37L4.62055 22.2C4.82055 22.4 5.07055 22.5 5.33055 22.5C5.59055 22.5 5.84055 22.4 6.04055 22.21L17.2105 11.04C17.6005 10.65 17.6005 10.01 17.2105 9.62ZM13.6705 8.92L15.0805 10.33L13.9105 11.5L12.5005 10.09L13.6705 8.92ZM5.33055 20.09L3.92055 18.68L11.0905 11.5L12.5005 12.91L5.33055 20.09Z"})),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M3.5,10.5C3.5,12.95 5.26,14.97 7.58,15.41L6.09,13.92L7.5,12.5L11.5,16.51L7.5,20.5L6.09,19.09L7.67,17.51L7.67,17.45C4.2,17.04 1.5,14.08 1.5,10.5C1.5,6.63 4.63,3.5 8.5,3.5L11.5,3.5L11.5,5.5L8.5,5.5C5.74,5.5 3.5,7.74 3.5,10.5Z"}),(0,e.createElement)("path",{d:"M22.5,10.5L22.5,3.5L13.5,3.5L13.5,10.5L22.5,10.5ZM20.5,8.5L15.5,8.5L15.5,5.5L20.5,5.5L20.5,8.5Z"}),(0,e.createElement)("rect",{x:"13.5",y:"12.5",width:"9",height:"7"})),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M18.6 19.5008H21V21.5008H15V15.5008H17V18.2308C18.83 16.7608 20 14.5208 20 12.0008C20 7.93078 16.94 4.56078 13 4.07078V2.05078C18.05 2.55078 22 6.81078 22 12.0008C22 14.9908 20.68 17.6708 18.6 19.5008ZM4 12.0008C4 9.48078 5.17 7.23078 7 5.77078V8.50078H9V2.50078H3V4.50078H5.4C3.32 6.33078 2 9.01078 2 12.0008C2 17.1908 5.95 21.4508 11 21.9508V19.9308C7.06 19.4408 4 16.0708 4 12.0008ZM16.24 8.11078L10.58 13.7708L7.75 10.9408L6.34 12.3508L10.58 16.5908L17.65 9.52078L16.24 8.11078Z"})),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M12 6V2L7 7L12 12V8C15.31 8 18 10.69 18 14C18 17.31 15.31 20 12 20C8.69 20 6 17.31 6 14H4C4 18.42 7.58 22 12 22C16.42 22 20 18.42 20 14C20 9.58 16.42 6 12 6Z"})),(0,e.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M16 9V19H8V9H16ZM14.5 3H9.5L8.5 4H5V6H19V4H15.5L14.5 3ZM18 7H6V19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7Z"})),(0,e.createElement)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},(0,e.createElement)(t.Path,{d:"M4 10.5h16V9H4v1.5ZM4 15h9v-1.5H4V15Z"}))),P=({disabled:n,setPrompt:r})=>{const{toggleHighlight:i}=x(),{selectedText:o}=E(),c=(0,a.useSelect)((e=>e("core/block-editor").getSelectedBlockClientIds()),[]);(0,l.useEffect)((()=>()=>{i(c,{isHighlighted:!1})}),[c,i]);const u=[{label:(0,s.__)("Improve writing","extendify-local"),promptType:"improve-writing",systemMessageKey:"edit",icon:(0,e.createElement)(p,{icon:f})},{label:(0,s.__)("Fix spelling & grammar","extendify-local"),promptType:"fix-spelling-grammar",icon:(0,e.createElement)(p,{icon:g})},{label:(0,s.__)("Simplify language","extendify-local"),promptType:"simplify-language",icon:(0,e.createElement)(p,{icon:y})},{label:(0,s.__)("Make shorter","extendify-local"),promptType:"make-shorter",icon:(0,e.createElement)(p,{icon:S})},{label:(0,s.__)("Make longer","extendify-local"),promptType:"make-longer",icon:(0,e.createElement)(p,{icon:v})}];return(0,e.createElement)(t.MenuGroup,null,u.map((({label:s,promptType:a,icon:l})=>(0,e.createElement)(t.MenuItem,{key:`${a}-${a}-edit`,onClick:()=>(e=>{r({text:o,promptType:e,systemMessageKey:"edit"})})(a),onMouseEnter:()=>i(c,{isHighlighted:!0}),onMouseLeave:()=>i(c,{isHighlighted:!1}),icon:l,iconPosition:"left",disabled:n,className:"group"},(0,e.createElement)("span",{className:"whitespace-normal text-left"},s)))))},C=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"}));var T=n(967),V=n.n(T);const L="undefined"!=typeof document,k=L?e.useLayoutEffect:e.useEffect;function M(){const t=(0,e.useRef)(!1);return k((()=>(t.current=!0,()=>{t.current=!1})),[]),t}const A=e=>e;class _{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const D=["prepare","read","update","preRender","render","postRender"],{schedule:I,cancel:R,state:B,steps:O}=function(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=D.reduce(((e,t)=>(e[t]=function(e){let t=new _,n=new _,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(e,s=!1,a=!1)=>{const l=a&&i,c=l?t:n;return s&&o.add(e),c.add(e)&&l&&i&&(r=t.order.length),e},cancel:e=>{n.remove(e),o.delete(e)},process:l=>{if(i)s=!0;else{if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(l),o.has(r)&&(a.schedule(r),e())}i=!1,s&&(s=!1,a.process(l))}}};return a}((()=>n=!0)),e)),{}),o=e=>s[e].process(i),a=()=>{const t=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(t-i.timestamp,40),1),i.timestamp=t,i.isProcessing=!0,D.forEach(o),i.isProcessing=!1,n&&(r=!1,e(a))};return{schedule:D.reduce(((t,o)=>{const l=s[o];return t[o]=(t,s=!1,o=!1)=>(n||(n=!0,r=!0,i.isProcessing||e(a)),l.schedule(t,s,o)),t}),{}),cancel:e=>D.forEach((t=>s[t].cancel(e))),state:i,steps:s}}("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:A),j=(0,e.createContext)(null);function F(t){const n=(0,e.useRef)(null);return null===n.current&&(n.current=t()),n.current}class N extends e.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function H({children:t,isPresent:n}){const r=(0,e.useId)(),i=(0,e.useRef)(null),s=(0,e.useRef)({width:0,height:0,top:0,left:0});return(0,e.useInsertionEffect)((()=>{const{width:e,height:t,top:o,left:a}=s.current;if(n||!i.current||!e||!t)return;i.current.dataset.motionPopId=r;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${r}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            top: ${o}px !important;\n            left: ${a}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[n]),e.createElement(N,{isPresent:n,childRef:i,sizeRef:s},e.cloneElement(t,{ref:i}))}const z=({children:t,initial:n,isPresent:r,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:a})=>{const l=F(U),c=(0,e.useId)(),u=(0,e.useMemo)((()=>({id:c,initial:n,isPresent:r,custom:s,onExitComplete:e=>{l.set(e,!0);for(const e of l.values())if(!e)return;i&&i()},register:e=>(l.set(e,!1),()=>l.delete(e))})),o?void 0:[r]);return(0,e.useMemo)((()=>{l.forEach(((e,t)=>l.set(t,!1)))}),[r]),e.useEffect((()=>{!r&&!l.size&&i&&i()}),[r]),"popLayout"===a&&(t=e.createElement(H,{isPresent:r},t)),e.createElement(j.Provider,{value:u},t)};function U(){return new Map}const $=(0,e.createContext)({});let G=A,Z=A;const W=e=>e.key||"",q=({children:t,custom:n,initial:r=!0,onExitComplete:i,exitBeforeEnter:s,presenceAffectsLayout:o=!0,mode:a="sync"})=>{Z(!s,"Replace exitBeforeEnter with mode='wait'");const l=(0,e.useContext)($).forceRender||function(){const t=M(),[n,r]=(0,e.useState)(0),i=(0,e.useCallback)((()=>{t.current&&r(n+1)}),[n]);return[(0,e.useCallback)((()=>I.postRender(i)),[i]),n]}()[0],c=M(),u=function(t){const n=[];return e.Children.forEach(t,(t=>{(0,e.isValidElement)(t)&&n.push(t)})),n}(t);let d=u;const h=(0,e.useRef)(new Map).current,m=(0,e.useRef)(d),p=(0,e.useRef)(new Map).current,f=(0,e.useRef)(!0);var g;if(k((()=>{f.current=!1,function(e,t){e.forEach((e=>{const n=W(e);t.set(n,e)}))}(u,p),m.current=d})),g=()=>{f.current=!0,p.clear(),h.clear()},(0,e.useEffect)((()=>()=>g()),[]),f.current)return e.createElement(e.Fragment,null,d.map((t=>e.createElement(z,{key:W(t),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:o,mode:a},t))));d=[...d];const y=m.current.map(W),v=u.map(W),x=y.length;for(let e=0;e<x;e++){const t=y[e];-1!==v.indexOf(t)||h.has(t)||h.set(t,void 0)}return"wait"===a&&h.size&&(d=[]),h.forEach(((t,r)=>{if(-1!==v.indexOf(r))return;const s=p.get(r);if(!s)return;const f=y.indexOf(r);let g=t;if(!g){const t=()=>{p.delete(r),h.delete(r);const e=m.current.findIndex((e=>e.key===r));if(m.current.splice(e,1),!h.size){if(m.current=u,!1===c.current)return;l(),i&&i()}};g=e.createElement(z,{key:W(s),isPresent:!1,onExitComplete:t,custom:n,presenceAffectsLayout:o,mode:a},s),h.set(r,g)}d.splice(f,0,g)})),d=d.map((t=>{const n=t.key;return h.has(n)?t:e.createElement(z,{key:W(t),isPresent:!0,presenceAffectsLayout:o,mode:a},t)})),e.createElement(e.Fragment,null,h.size?d:d.map((t=>(0,e.cloneElement)(t))))},K=(0,e.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Y=(0,e.createContext)({}),X=(0,e.createContext)({strict:!1});function J(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Q(e){return"string"==typeof e||Array.isArray(e)}function ee(e){return"object"==typeof e&&"function"==typeof e.start}const te=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ne=["initial",...te];function re(e){return ee(e.animate)||ne.some((t=>Q(e[t])))}function ie(e){return Boolean(re(e)||e.variants)}function se(e){return Array.isArray(e)?e.join(" "):e}const oe={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ae={};for(const e in oe)ae[e]={isEnabled:t=>oe[e].some((e=>!!t[e]))};const le=(0,e.createContext)({}),ce=Symbol.for("motionComponentSymbol");function ue({preloadedFeatures:t,createVisualElement:n,useRender:r,useVisualState:i,Component:s}){t&&function(e){for(const t in e)ae[t]={...ae[t],...e[t]}}(t);const o=(0,e.forwardRef)((function(o,a){let l;const c={...(0,e.useContext)(K),...o,layoutId:de(o)},{isStatic:u}=c,d=function(t){const{initial:n,animate:r}=function(e,t){if(re(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Q(t)?t:void 0,animate:Q(n)?n:void 0}}return!1!==e.inherit?t:{}}(t,(0,e.useContext)(Y));return(0,e.useMemo)((()=>({initial:n,animate:r})),[se(n),se(r)])}(o),h=i(o,u);if(!u&&L){d.visualElement=function(t,n,r,i){const{visualElement:s}=(0,e.useContext)(Y),o=(0,e.useContext)(X),a=(0,e.useContext)(j),l=(0,e.useContext)(K).reducedMotion,c=(0,e.useRef)();i=i||o.renderer,!c.current&&i&&(c.current=i(t,{visualState:n,parent:s,props:r,presenceContext:a,blockInitialAnimation:!!a&&!1===a.initial,reducedMotionConfig:l}));const u=c.current;(0,e.useInsertionEffect)((()=>{u&&u.update(r,a)}));const d=(0,e.useRef)(Boolean(window.HandoffAppearAnimations));return k((()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())})),(0,e.useEffect)((()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,d.current=!1)})),u}(s,h,c,n);const r=(0,e.useContext)(le),i=(0,e.useContext)(X).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,i,t,r))}return e.createElement(Y.Provider,{value:d},l&&d.visualElement?e.createElement(l,{visualElement:d.visualElement,...c}):null,r(s,o,function(t,n,r){return(0,e.useCallback)((e=>{e&&t.mount&&t.mount(e),n&&(e?n.mount(e):n.unmount()),r&&("function"==typeof r?r(e):J(r)&&(r.current=e))}),[n])}(h,d.visualElement,a),h,u,d.visualElement))}));return o[ce]=s,o}function de({layoutId:t}){const n=(0,e.useContext)($).id;return n&&void 0!==t?n+"-"+t:t}function he(e){function t(t,n={}){return ue(e(t,n))}if("undefined"==typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const me=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pe(e){return"string"==typeof e&&!e.includes("-")&&!!(me.indexOf(e)>-1||/[A-Z]/.test(e))}const fe={},ge=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ye=new Set(ge);function ve(e,{layout:t,layoutId:n}){return ye.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!fe[e]||"opacity"===e)}const xe=e=>Boolean(e&&e.getVelocity),we={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ee=ge.length,be=e=>t=>"string"==typeof t&&t.startsWith(e),Se=be("--"),Pe=be("var(--"),Ce=(e,t)=>t&&"number"==typeof e?t.transform(e):e,Te=(e,t,n)=>Math.min(Math.max(n,e),t),Ve={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Le={...Ve,transform:e=>Te(0,1,e)},ke={...Ve,default:1},Me=e=>Math.round(1e5*e)/1e5,Ae=/(-)?([\d]*\.?[\d])+/g,_e=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,De=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ie(e){return"string"==typeof e}const Re=e=>({test:t=>Ie(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Be=Re("deg"),Oe=Re("%"),je=Re("px"),Fe=Re("vh"),Ne=Re("vw"),He={...Oe,parse:e=>Oe.parse(e)/100,transform:e=>Oe.transform(100*e)},ze={...Ve,transform:Math.round},Ue={borderWidth:je,borderTopWidth:je,borderRightWidth:je,borderBottomWidth:je,borderLeftWidth:je,borderRadius:je,radius:je,borderTopLeftRadius:je,borderTopRightRadius:je,borderBottomRightRadius:je,borderBottomLeftRadius:je,width:je,maxWidth:je,height:je,maxHeight:je,size:je,top:je,right:je,bottom:je,left:je,padding:je,paddingTop:je,paddingRight:je,paddingBottom:je,paddingLeft:je,margin:je,marginTop:je,marginRight:je,marginBottom:je,marginLeft:je,rotate:Be,rotateX:Be,rotateY:Be,rotateZ:Be,scale:ke,scaleX:ke,scaleY:ke,scaleZ:ke,skew:Be,skewX:Be,skewY:Be,distance:je,translateX:je,translateY:je,translateZ:je,x:je,y:je,z:je,perspective:je,transformPerspective:je,opacity:Le,originX:He,originY:He,originZ:je,zIndex:ze,fillOpacity:Le,strokeOpacity:Le,numOctaves:ze};function $e(e,t,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=e;let l=!1,c=!1,u=!0;for(const e in t){const n=t[e];if(Se(e)){s[e]=n;continue}const r=Ue[e],d=Ce(n,r);if(ye.has(e)){if(l=!0,o[e]=d,!u)continue;n!==(r.default||0)&&(u=!1)}else e.startsWith("origin")?(c=!0,a[e]=d):i[e]=d}if(t.transform||(l||r?i.transform=function(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let s="";for(let t=0;t<Ee;t++){const n=ge[t];void 0!==e[n]&&(s+=`${we[n]||n}(${e[n]}) `)}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,r?"":s):n&&r&&(s="none"),s}(e.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;i.transformOrigin=`${e} ${t} ${n}`}}const Ge=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ze(e,t,n){for(const r in t)xe(t[r])||ve(r,n)||(e[r]=t[r])}function We(t,n,r){const i={},s=function(t,n,r){const i={};return Ze(i,t.style||{},t),Object.assign(i,function({transformTemplate:t},n,r){return(0,e.useMemo)((()=>{const e=Ge();return $e(e,n,{enableHardwareAcceleration:!r},t),Object.assign({},e.vars,e.style)}),[n])}(t,n,r)),t.transformValues?t.transformValues(i):i}(t,n,r);return t.drag&&!1!==t.dragListener&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=s,i}const qe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Ke(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||qe.has(e)}let Ye=e=>!Ke(e);try{(Xe=require("@emotion/is-prop-valid").default)&&(Ye=e=>e.startsWith("on")?!Ke(e):Xe(e))}catch(e){}var Xe;function Je(e,t,n){return"string"==typeof e?e:je.transform(t+n*e)}const Qe={offset:"stroke-dashoffset",array:"stroke-dasharray"},et={offset:"strokeDashoffset",array:"strokeDasharray"};function tt(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,h){if($e(e,c,u,h),d)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:f}=e;m.transform&&(f&&(p.transform=m.transform),delete m.transform),f&&(void 0!==i||void 0!==s||p.transform)&&(p.transformOrigin=function(e,t,n){return`${Je(t,e.x,e.width)} ${Je(n,e.y,e.height)}`}(f,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==t&&(m.x=t),void 0!==n&&(m.y=n),void 0!==r&&(m.scale=r),void 0!==o&&function(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?Qe:et;e[s.offset]=je.transform(-r);const o=je.transform(t),a=je.transform(n);e[s.array]=`${o} ${a}`}(m,o,a,l,!1)}const nt=()=>({...Ge(),attrs:{}}),rt=e=>"string"==typeof e&&"svg"===e.toLowerCase();function it(t,n,r,i){const s=(0,e.useMemo)((()=>{const e=nt();return tt(e,n,{enableHardwareAcceleration:!1},rt(i),t.transformTemplate),{...e.attrs,style:{...e.style}}}),[n]);if(t.style){const e={};Ze(e,t.style,t),s.style={...e,...s.style}}return s}function st(t=!1){return(n,r,i,{latestValues:s},o)=>{const a=(pe(n)?it:We)(r,s,o,n),l=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"==typeof e.values||(Ye(i)||!0===n&&Ke(i)||!t&&!Ke(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(r,"string"==typeof n,t),c={...l,...a,ref:i},{children:u}=r,d=(0,e.useMemo)((()=>xe(u)?u.get():u),[u]);return(0,e.createElement)(n,{...c,children:d})}}const ot=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function at(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const t in n)e.style.setProperty(t,n[t])}const lt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ct(e,t,n,r){at(e,t,void 0,r);for(const n in t.attrs)e.setAttribute(lt.has(n)?n:ot(n),t.attrs[n])}function ut(e,t){const{style:n}=e,r={};for(const i in n)(xe(n[i])||t.style&&xe(t.style[i])||ve(i,e))&&(r[i]=n[i]);return r}function dt(e,t){const n=ut(e,t);for(const r in e)(xe(e[r])||xe(t[r]))&&(n[-1!==ge.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return n}function ht(e,t,n,r={},i={}){return"function"==typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}const mt=e=>Array.isArray(e),pt=e=>Boolean(e&&"object"==typeof e&&e.mix&&e.toValue),ft=e=>mt(e)?e[e.length-1]||0:e;function gt(e){const t=xe(e)?e.get():e;return pt(t)?t.toValue():t}const yt=t=>(n,r)=>{const i=(0,e.useContext)(Y),s=(0,e.useContext)(j),o=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,s){const o={latestValues:vt(r,i,s,e),renderState:t()};return n&&(o.mount=e=>n(r,e,o)),o}(t,n,i,s);return r?o():F(o)};function vt(e,t,n,r){const i={},s=r(e,{});for(const e in s)i[e]=gt(s[e]);let{initial:o,animate:a}=e;const l=re(e),c=ie(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const d=u?a:o;return d&&"boolean"!=typeof d&&!ee(d)&&(Array.isArray(d)?d:[d]).forEach((t=>{const n=ht(e,t);if(!n)return;const{transitionEnd:r,transition:s,...o}=n;for(const e in o){let t=o[e];Array.isArray(t)&&(t=t[u?t.length-1:0]),null!==t&&(i[e]=t)}for(const e in r)i[e]=r[e]})),i}const xt={useVisualState:yt({scrapeMotionValuesFromProps:dt,createRenderState:nt,onMount:(e,t,{renderState:n,latestValues:r})=>{I.read((()=>{try{n.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){n.dimensions={x:0,y:0,width:0,height:0}}})),I.render((()=>{tt(n,r,{enableHardwareAcceleration:!1},rt(t.tagName),e.transformTemplate),ct(t,n)}))}})},wt={useVisualState:yt({scrapeMotionValuesFromProps:ut,createRenderState:Ge})};function Et(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const bt=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function St(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const Pt=e=>t=>bt(t)&&e(t,St(t));function Ct(e,t,n,r){return Et(e,t,Pt(n),r)}const Tt=(e,t)=>n=>t(e(n)),Vt=(...e)=>e.reduce(Tt);function Lt(e){let t=null;return()=>null===t&&(t=e,()=>{t=null})}const kt=Lt("dragHorizontal"),Mt=Lt("dragVertical");function At(e){let t=!1;if("y"===e)t=Mt();else if("x"===e)t=kt();else{const e=kt(),n=Mt();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function _t(){const e=At(!0);return!e||(e(),!1)}class Dt{constructor(e){this.isMounted=!1,this.node=e}update(){}}function It(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Ct(e.current,n,((n,i)=>{if("touch"===n.type||_t())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[r]&&I.update((()=>s[r](n,i)))}),{passive:!e.getProps()[r]})}const Rt=(e,t)=>!!t&&(e===t||Rt(e,t.parentElement));function Bt(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,St(n))}const Ot=new WeakMap,jt=new WeakMap,Ft=e=>{const t=Ot.get(e.target);t&&t(e)},Nt=e=>{e.forEach(Ft)};const Ht={some:0,all:1},zt={inView:{Feature:class extends Dt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:Ht[r]};return function(e,t,n){const r=function({root:e,...t}){const n=e||document;jt.has(n)||jt.set(n,{});const r=jt.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(Nt,{root:e,...t})),r[i]}(t);return Ot.set(e,n),r.observe(e),()=>{Ot.delete(e),r.unobserve(e)}}(this.node.current,s,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Dt{constructor(){super(...arguments),this.removeStartListeners=A,this.removeEndListeners=A,this.removeAccessibleListeners=A,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;const n=this.node.getProps(),r=Ct(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r}=this.node.getProps();I.update((()=>{Rt(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)}))}),{passive:!(n.onTap||n.onPointerUp)}),i=Ct(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Vt(r,i),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=Et(this.node.current,"keydown",(e=>{"Enter"!==e.key||this.isPressing||(this.removeEndListeners(),this.removeEndListeners=Et(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&Bt("up",((e,t)=>{const{onTap:n}=this.node.getProps();n&&I.update((()=>n(e,t)))}))})),Bt("down",((e,t)=>{this.startPress(e,t)})))})),t=Et(this.node.current,"blur",(()=>{this.isPressing&&Bt("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=Vt(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&I.update((()=>n(e,t)))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!_t()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&I.update((()=>n(e,t)))}mount(){const e=this.node.getProps(),t=Ct(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Et(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Vt(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Dt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vt(Et(this.node.current,"focus",(()=>this.onFocus())),Et(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends Dt{mount(){this.unmount=Vt(It(this.node,!0),It(this.node,!1))}unmount(){}}}};function Ut(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function $t(e,t,n){const r=e.getProps();return ht(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.get())),t}(e),function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.getVelocity())),t}(e))}const Gt="data-"+ot("framerAppearId"),Zt=e=>1e3*e,Wt=e=>e/1e3,qt=e=>Array.isArray(e)&&"number"==typeof e[0];function Kt(e){return Boolean(!e||"string"==typeof e&&Xt[e]||qt(e)||Array.isArray(e)&&e.every(Kt))}const Yt=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Xt={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yt([0,.65,.55,1]),circOut:Yt([.55,0,1,.45]),backIn:Yt([.31,.01,.66,-.59]),backOut:Yt([.33,1.53,.69,.99])};function Jt(e){if(e)return qt(e)?Yt(e):Array.isArray(e)?e.map(Jt):Xt[e]}const Qt=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function en(e,t,n,r){if(e===t&&n===r)return A;return i=>0===i||1===i?i:Qt(function(e,t,n,r,i){let s,o,a=0;do{o=t+(n-t)/2,s=Qt(o,r,i)-e,s>0?n=o:t=o}while(Math.abs(s)>1e-7&&++a<12);return o}(i,0,1,e,n),t,r)}const tn=en(.42,0,1,1),nn=en(0,0,.58,1),rn=en(.42,0,.58,1),sn=e=>Array.isArray(e)&&"number"!=typeof e[0],on=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,an=e=>t=>1-e(1-t),ln=e=>1-Math.sin(Math.acos(e)),cn=an(ln),un=on(cn),dn=en(.33,1.53,.69,.99),hn=an(dn),mn=on(hn),pn={linear:A,easeIn:tn,easeInOut:rn,easeOut:nn,circIn:ln,circInOut:un,circOut:cn,backIn:hn,backInOut:mn,backOut:dn,anticipate:e=>(e*=2)<1?.5*hn(e):.5*(2-Math.pow(2,-10*(e-1)))},fn=e=>{if(Array.isArray(e)){Z(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,i]=e;return en(t,n,r,i)}return"string"==typeof e?(Z(void 0!==pn[e],`Invalid easing type '${e}'`),pn[e]):e},gn=(e,t)=>n=>Boolean(Ie(n)&&De.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),yn=(e,t,n)=>r=>{if(!Ie(r))return r;const[i,s,o,a]=r.match(Ae);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},vn={...Ve,transform:e=>Math.round((e=>Te(0,255,e))(e))},xn={test:gn("rgb","red"),parse:yn("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+vn.transform(e)+", "+vn.transform(t)+", "+vn.transform(n)+", "+Me(Le.transform(r))+")"},wn={test:gn("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:xn.transform},En={test:gn("hsl","hue"),parse:yn("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Oe.transform(Me(t))+", "+Oe.transform(Me(n))+", "+Me(Le.transform(r))+")"},bn={test:e=>xn.test(e)||wn.test(e)||En.test(e),parse:e=>xn.test(e)?xn.parse(e):En.test(e)?En.parse(e):wn.parse(e),transform:e=>Ie(e)?e:e.hasOwnProperty("red")?xn.transform(e):En.transform(e)},Sn=(e,t,n)=>-n*e+n*t+e;function Pn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const Cn=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Tn=[wn,xn,En];function Vn(e){const t=(n=e,Tn.find((e=>e.test(n))));var n;Z(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`);let r=t.parse(e);return t===En&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,s=0,o=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,a=2*n-r;i=Pn(a,r,e+1/3),s=Pn(a,r,e),o=Pn(a,r,e-1/3)}else i=s=o=n;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*o),alpha:r}}(r)),r}const Ln=(e,t)=>{const n=Vn(e),r=Vn(t),i={...n};return e=>(i.red=Cn(n.red,r.red,e),i.green=Cn(n.green,r.green,e),i.blue=Cn(n.blue,r.blue,e),i.alpha=Sn(n.alpha,r.alpha,e),xn.transform(i))},kn={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:A},Mn={regex:_e,countKey:"Colors",token:"${c}",parse:bn.parse},An={regex:Ae,countKey:"Numbers",token:"${n}",parse:Ve.parse};function Dn(e,{regex:t,countKey:n,token:r,parse:i}){const s=e.tokenised.match(t);s&&(e["num"+n]=s.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...s.map(i)))}function In(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Dn(n,kn),Dn(n,Mn),Dn(n,An),n}function Rn(e){return In(e).values}function Bn(e){const{values:t,numColors:n,numVars:r,tokenised:i}=In(e),s=t.length;return e=>{let t=i;for(let i=0;i<s;i++)t=i<r?t.replace(kn.token,e[i]):i<r+n?t.replace(Mn.token,bn.transform(e[i])):t.replace(An.token,Me(e[i]));return t}}const On=e=>"number"==typeof e?0:e,jn={test:function(e){var t,n;return isNaN(e)&&Ie(e)&&((null===(t=e.match(Ae))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(_e))||void 0===n?void 0:n.length)||0)>0},parse:Rn,createTransformer:Bn,getAnimatableNone:function(e){const t=Rn(e);return Bn(e)(t.map(On))}},Fn=(e,t)=>n=>`${n>0?t:e}`;function Nn(e,t){return"number"==typeof e?n=>Sn(e,t,n):bn.test(e)?Ln(e,t):e.startsWith("var(")?Fn(e,t):Un(e,t)}const Hn=(e,t)=>{const n=[...e],r=n.length,i=e.map(((e,n)=>Nn(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},zn=(e,t)=>{const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Nn(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}},Un=(e,t)=>{const n=jn.createTransformer(t),r=In(e),i=In(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Vt(Hn(r.values,i.values),n):(G(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),Fn(e,t))},$n=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},Gn=(e,t)=>n=>Sn(e,t,n);function Zn(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Z(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],i=n||("number"==typeof(s=e[0])?Gn:"string"==typeof s?bn.test(s)?Ln:Un:Array.isArray(s)?Hn:"object"==typeof s?zn:Gn);var s;const o=e.length-1;for(let n=0;n<o;n++){let s=i(e[n],e[n+1]);if(t){const e=Array.isArray(t)?t[n]||A:t;s=Vt(e,s)}r.push(s)}return r}(t,r,i),a=o.length,l=t=>{let n=0;if(a>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=$n(e[n],e[n+1],t);return o[n](r)};return n?t=>l(Te(e[0],e[s-1],t)):l}function Wn({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=sn(r)?r.map(fn):fn(r),s={done:!1,value:t[0]},o=function(e,t){return e.map((e=>e*t))}(n&&n.length===t.length?n:function(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=$n(0,t,r);e.push(Sn(n,1,i))}}(t,e.length-1),t}(t),e),a=Zn(o,t,{ease:Array.isArray(i)?i:(l=t,c=i,l.map((()=>c||rn)).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(s.value=a(t),s.done=t>=e,s)}}function qn(e,t){return t?e*(1e3/t):0}const Kn=5;function Yn(e,t,n){const r=Math.max(t-Kn,0);return qn(n-e(r),t-r)}const Xn=.001,Jn=.01,Qn=10,er=.05,tr=1;const nr=12;function rr(e,t){return e*Math.sqrt(1-t*t)}const ir=["duration","bounce"],sr=["stiffness","damping","mass"];function or(e,t){return t.some((t=>void 0!==e[t]))}function ar({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],s=e[e.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,velocity:u,duration:d,isResolvedFromDuration:h}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!or(e,sr)&&or(e,ir)){const n=function({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,s;G(e<=Zt(Qn),"Spring duration must be 10 seconds or less");let o=1-t;o=Te(er,tr,o),e=Te(Jn,Qn,Wt(e)),o<1?(i=t=>{const r=t*o,i=r*e,s=r-n,a=rr(t,o),l=Math.exp(-i);return Xn-s/a*l},s=t=>{const r=t*o*e,s=r*n+n,a=Math.pow(o,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=rr(Math.pow(t,2),o);return(-i(t)+Xn>0?-1:1)*((s-a)*l)/c}):(i=t=>Math.exp(-t*e)*((t-n)*e+1)-Xn,s=t=>Math.exp(-t*e)*(e*e*(n-t)));const a=function(e,t,n){let r=n;for(let n=1;n<nr;n++)r-=e(r)/t(r);return r}(i,s,5/e);if(e=Zt(e),isNaN(a))return{stiffness:100,damping:10,duration:e};{const t=Math.pow(a,2)*r;return{stiffness:t,damping:2*o*Math.sqrt(r*t),duration:e}}}(e);t={...t,...n,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}(r),m=u?-Wt(u):0,p=l/(2*Math.sqrt(a*c)),f=s-i,g=Wt(Math.sqrt(a/c)),y=Math.abs(f)<5;let v;if(n||(n=y?.01:2),t||(t=y?.005:.5),p<1){const e=rr(g,p);v=t=>{const n=Math.exp(-p*g*t);return s-n*((m+p*g*f)/e*Math.sin(e*t)+f*Math.cos(e*t))}}else if(1===p)v=e=>s-Math.exp(-g*e)*(f+(m+g*f)*e);else{const e=g*Math.sqrt(p*p-1);v=t=>{const n=Math.exp(-p*g*t),r=Math.min(e*t,300);return s-n*((m+p*g*f)*Math.sinh(r)+e*f*Math.cosh(r))/e}}return{calculatedDuration:h&&d||null,next:e=>{const r=v(e);if(h)o.done=e>=d;else{let i=m;0!==e&&(i=p<1?Yn(v,e,r):0);const a=Math.abs(i)<=n,l=Math.abs(s-r)<=t;o.done=a&&l}return o.value=o.done?s:r,o}}}function lr({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},m=e=>void 0===a?l:void 0===l||Math.abs(a-e)<Math.abs(l-e)?a:l;let p=n*t;const f=d+p,g=void 0===o?f:o(f);g!==f&&(p=g-d);const y=e=>-p*Math.exp(-e/r),v=e=>g+y(e),x=e=>{const t=y(e),n=v(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let w,E;const b=e=>{var t;t=h.value,(void 0!==a&&t<a||void 0!==l&&t>l)&&(w=e,E=ar({keyframes:[h.value,m(h.value)],velocity:Yn(v,e,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return b(0),{calculatedDuration:null,next:e=>{let t=!1;return E||void 0!==w||(t=!0,x(e),b(e)),void 0!==w&&e>w?E.next(e-w):(!t&&x(e),h)}}}const cr=e=>{const t=({timestamp:t})=>e(t);return{start:()=>I.update(t,!0),stop:()=>R(t),now:()=>B.isProcessing?B.timestamp:performance.now()}},ur=2e4;function dr(e){let t=0,n=e.next(t);for(;!n.done&&t<ur;)t+=50,n=e.next(t);return t>=ur?1/0:t}const hr={decay:lr,inertia:lr,tween:Wn,keyframes:Wn,spring:ar};function mr({autoplay:e=!0,delay:t=0,driver:n=cr,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...h}){let m,p,f=1,g=!1;const y=()=>{p=new Promise((e=>{m=e}))};let v;y();const x=hr[i]||Wn;let w;x!==Wn&&"number"!=typeof r[0]&&(w=Zn([0,100],r,{clamp:!1}),r=[0,100]);const E=x({...h,keyframes:r});let b;"mirror"===a&&(b=x({...h,keyframes:[...r].reverse(),velocity:-(h.velocity||0)}));let S="idle",P=null,C=null,T=null;null===E.calculatedDuration&&s&&(E.calculatedDuration=dr(E));const{calculatedDuration:V}=E;let L=1/0,k=1/0;null!==V&&(L=V+o,k=L*(s+1)-o);let M=0;const A=e=>{if(null===C)return;f>0&&(C=Math.min(C,e)),f<0&&(C=Math.min(e-k/f,C)),M=null!==P?P:Math.round(e-C)*f;const n=M-t*(f>=0?1:-1),i=f>=0?n<0:n>k;M=Math.max(n,0),"finished"===S&&null===P&&(M=k);let l=M,c=E;if(s){const e=M/L;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,s+1);const r=Boolean(t%2);r&&("reverse"===a?(n=1-n,o&&(n-=o/L)):"mirror"===a&&(c=b));let i=Te(0,1,n);M>k&&(i="reverse"===a&&r?1:0),l=i*L}const u=i?{done:!1,value:r[0]}:c.next(l);w&&(u.value=w(u.value));let{done:h}=u;i||null===V||(h=f>=0?M>=k:M<=0);const m=null===P&&("finished"===S||"running"===S&&h);return d&&d(u.value),m&&I(),u},_=()=>{v&&v.stop(),v=void 0},D=()=>{S="idle",_(),m(),y(),C=T=null},I=()=>{S="finished",u&&u(),_(),m()},R=()=>{if(g)return;v||(v=n(A));const e=v.now();l&&l(),null!==P?C=e-P:C&&"finished"!==S||(C=e),"finished"===S&&y(),T=C,P=null,S="running",v.start()};e&&R();const B={then:(e,t)=>p.then(e,t),get time(){return Wt(M)},set time(e){e=Zt(e),M=e,null===P&&v&&0!==f?C=v.now()-e/f:P=e},get duration(){const e=null===E.calculatedDuration?dr(E):E.calculatedDuration;return Wt(e)},get speed(){return f},set speed(e){e!==f&&v&&(f=e,B.time=Wt(M))},get state(){return S},play:R,pause:()=>{S="paused",P=M},stop:()=>{g=!0,"idle"!==S&&(S="idle",c&&c(),D())},cancel:()=>{null!==T&&A(T),D()},complete:()=>{S="finished"},sample:e=>(C=0,A(e))};return B}const pr=function(e){let t;return()=>(void 0===t&&(t=Object.hasOwnProperty.call(Element.prototype,"animate")),t)}(),fr=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);const gr={type:"spring",stiffness:500,damping:25,restSpeed:10},yr={type:"keyframes",duration:.8},vr={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xr=(e,{keyframes:t})=>t.length>2?yr:ye.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:gr:vr,wr=(e,t)=>!("zIndex"===e||"number"!=typeof t&&!Array.isArray(t)&&("string"!=typeof t||!jn.test(t)&&"0"!==t||t.startsWith("url("))),Er=new Set(["brightness","contrast","saturate","opacity"]);function br(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Ae)||[];if(!r)return e;const i=n.replace(r,"");let s=Er.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Sr=/([a-z-]*)\(.*?\)/g,Pr={...jn,getAnimatableNone:e=>{const t=e.match(Sr);return t?t.map(br).join(" "):e}},Cr={...Ue,color:bn,backgroundColor:bn,outlineColor:bn,fill:bn,stroke:bn,borderColor:bn,borderTopColor:bn,borderRightColor:bn,borderBottomColor:bn,borderLeftColor:bn,filter:Pr,WebkitFilter:Pr},Tr=e=>Cr[e];function Vr(e,t){let n=Tr(e);return n!==Pr&&(n=jn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Lr=e=>/^0[^.\s]+$/.test(e);function kr(e){return"number"==typeof e?0===e:null!==e?"none"===e||"0"===e||Lr(e):void 0}function Mr(e,t){return e[t]||e.default||e}const Ar=(e,t,n,r={})=>i=>{const s=Mr(r,e)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a-=Zt(o);const l=function(e,t,n,r){const i=wr(t,n);let s;s=Array.isArray(n)?[...n]:[null,n];const o=void 0!==r.from?r.from:e.get();let a;const l=[];for(let e=0;e<s.length;e++)null===s[e]&&(s[e]=0===e?o:s[e-1]),kr(s[e])&&l.push(e),"string"==typeof s[e]&&"none"!==s[e]&&"0"!==s[e]&&(a=s[e]);if(i&&l.length&&a)for(let e=0;e<l.length;e++)s[l[e]]=Vr(t,a);return s}(t,e,n,s),c=l[0],u=l[l.length-1],d=wr(e,c),h=wr(e,u);G(d===h,`You are trying to animate ${e} from "${c}" to "${u}". ${c} is not an animatable value - to enable this animation set ${c} to a value animatable to ${u} via the \`style\` property.`);let m={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}(s)||(m={...m,...xr(e,m)}),m.duration&&(m.duration=Zt(m.duration)),m.repeatDelay&&(m.repeatDelay=Zt(m.repeatDelay)),!d||!h||!1===s.type)return function({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:A,pause:A,stop:A,then:e=>(e(),Promise.resolve()),cancel:A,complete:A});return t?mr({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}(m);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=function(e,t,{onUpdate:n,onComplete:r,...i}){if(!pr()||!fr.has(t)||i.repeatDelay||"mirror"===i.repeatType||0===i.damping||"inertia"===i.type)return!1;let s,o,a=!1;const l=()=>{o=new Promise((e=>{s=e}))};l();let{keyframes:c,duration:u=300,ease:d,times:h}=i;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!Kt(t.ease))(t,i)){const e=mr({...i,repeat:0,delay:0});let t={done:!1,value:c[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;h=void 0,c=n,u=r-10,d="linear"}const m=function(e,t,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[t]:n};l&&(c.offset=l);const u=Jt(a);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"})}(e.owner.current,t,c,{...i,duration:u,ease:d,times:h});i.syncStart&&(m.startTime=B.isProcessing?B.timestamp:document.timeline?document.timeline.currentTime:performance.now());const p=()=>m.cancel(),f=()=>{I.update(p),s(),l()};return m.onfinish=()=>{e.set(function(e,{repeat:t,repeatType:n="loop"}){return e[t&&"loop"!==n&&t%2==1?0:e.length-1]}(c,i)),r&&r(),f()},{then:(e,t)=>o.then(e,t),attachTimeline:e=>(m.timeline=e,m.onfinish=null,A),get time(){return Wt(m.currentTime||0)},set time(e){m.currentTime=Zt(e)},get speed(){return m.playbackRate},set speed(e){m.playbackRate=e},get duration(){return Wt(u)},play:()=>{a||(m.play(),R(p))},pause:()=>m.pause(),stop:()=>{if(a=!0,"idle"===m.playState)return;const{currentTime:t}=m;if(t){const n=mr({...i,autoplay:!1});e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}f()},complete:()=>m.finish(),cancel:f}}(t,e,m);if(n)return n}return mr(m)};function _r(e){return Boolean(xe(e)&&e.add)}const Dr=e=>/^\-?\d*\.?\d+$/.test(e);function Ir(e,t){-1===e.indexOf(t)&&e.push(t)}function Rr(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Br{constructor(){this.subscriptions=[]}add(e){return Ir(this.subscriptions,e),()=>Rr(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Or={current:void 0};class jr{constructor(e,t={}){var n;this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(e,t=!0)=>{this.prev=this.current,this.current=e;const{delta:n,timestamp:r}=B;this.lastUpdated!==r&&(this.timeDelta=n,this.lastUpdated=r,I.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>I.postRender(this.velocityCheck),this.velocityCheck=({timestamp:e})=>{e!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Br);const n=this.events[e].add(t);return"change"===e?()=>{n(),I.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Or.current&&Or.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?qn(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fr(e,t){return new jr(e,t)}const Nr=e=>t=>t.test(e),Hr=[Ve,je,Oe,Be,Ne,Fe,{test:e=>"auto"===e,parse:e=>e}],zr=e=>Hr.find(Nr(e)),Ur=[...Hr,bn,jn];function $r(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Fr(n))}function Gr(e,t){if(t)return(t[e]||t.default||t).from}function Zr({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function Wr(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(s=r);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const t in a){const r=e.getValue(t),i=a[t];if(!r||void 0===i||u&&Zr(u,t))continue;const o={delay:n,elapsed:0,...s};if(window.HandoffAppearAnimations&&!r.hasAnimated){const n=e.getProps()[Gt];n&&(o.elapsed=window.HandoffAppearAnimations(n,t,r,I),o.syncStart=!0)}r.start(Ar(t,r,i,e.shouldReduceMotion&&ye.has(t)?{type:!1}:o));const d=r.animation;_r(l)&&(l.add(t),d.then((()=>l.remove(t)))),c.push(d)}return o&&Promise.all(c).then((()=>{o&&function(e,t){const n=$t(e,t);let{transitionEnd:r={},transition:i={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const t in s)$r(e,t,ft(s[t]))}(e,o)})),c}function qr(e,t,n={}){const r=$t(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Wr(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:s=0,staggerChildren:o,staggerDirection:a}=i;return function(e,t,n=0,r=0,i=1,s){const o=[],a=(e.variantChildren.size-1)*r,l=1===i?(e=0)=>e*r:(e=0)=>a-e*r;return Array.from(e.variantChildren).sort(Kr).forEach(((e,r)=>{e.notify("AnimationStart",t),o.push(qr(e,t,{...s,delay:n+l(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(o)}(e,t,s+r,o,a,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[e,t]="beforeChildren"===a?[s,o]:[o,s];return e().then((()=>t()))}return Promise.all([s(),o(n.delay)])}function Kr(e,t){return e.sortNodePosition(t)}const Yr=[...te].reverse(),Xr=te.length;function Jr(e){let t=function(e){return t=>Promise.all(t.map((({animation:t,options:n})=>function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map((t=>qr(e,t,n)));r=Promise.all(i)}else if("string"==typeof t)r=qr(e,t,n);else{const i="function"==typeof t?$t(e,t,n.custom):t;r=Promise.all(Wr(e,i,n))}return r.then((()=>e.notify("AnimationComplete",t)))}(e,t,n))))}(e);const n={animate:Qr(!0),whileInView:Qr(),whileHover:Qr(),whileTap:Qr(),whileDrag:Qr(),whileFocus:Qr(),exit:Qr()};let r=!0;const i=(t,n)=>{const r=$t(e,n);if(r){const{transition:e,transitionEnd:n,...i}=r;t={...t,...i,...n}}return t};function s(s,o){const a=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set;let d={},h=1/0;for(let t=0;t<Xr;t++){const f=Yr[t],g=n[f],y=void 0!==a[f]?a[f]:l[f],v=Q(y),x=f===o?g.isActive:null;!1===x&&(h=t);let w=y===l[f]&&y!==a[f]&&v;if(w&&r&&e.manuallyAnimateOnMount&&(w=!1),g.protectedKeys={...d},!g.isActive&&null===x||!y&&!g.prevProp||ee(y)||"boolean"==typeof y)continue;const E=(m=g.prevProp,"string"==typeof(p=y)?p!==m:!!Array.isArray(p)&&!Ut(p,m));let b=E||f===o&&g.isActive&&!w&&v||t>h&&v;const S=Array.isArray(y)?y:[y];let P=S.reduce(i,{});!1===x&&(P={});const{prevResolvedValues:C={}}=g,T={...C,...P},V=e=>{b=!0,u.delete(e),g.needsAnimating[e]=!0};for(const e in T){const t=P[e],n=C[e];d.hasOwnProperty(e)||(t!==n?mt(t)&&mt(n)?!Ut(t,n)||E?V(e):g.protectedKeys[e]=!0:void 0!==t?V(e):u.add(e):void 0!==t&&u.has(e)?V(e):g.protectedKeys[e]=!0)}g.prevProp=y,g.prevResolvedValues=P,g.isActive&&(d={...d,...P}),r&&e.blockInitialAnimation&&(b=!1),b&&!w&&c.push(...S.map((e=>({animation:e,options:{type:f,...s}}))))}var m,p;if(u.size){const t={};u.forEach((n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)})),c.push({animation:t})}let f=Boolean(c.length);return r&&!1===a.initial&&!e.manuallyAnimateOnMount&&(f=!1),r=!1,f?t(c):Promise.resolve()}return{animateChanges:s,setActive:function(t,r,i){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const a=s(i,t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function Qr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let ei=0;const ti={animation:{Feature:class extends Dt{constructor(e){super(e),e.animationState||(e.animationState=Jr(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ee(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Dt{constructor(){super(...arguments),this.id=ei++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:null!=n?n:this.node.getProps().custom});t&&!e&&i.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},ni=(e,t)=>Math.abs(e-t);class ri{constructor(e,t,{transformPagePoint:n}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=oi(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=ni(e.x,t.x),r=ni(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=B;this.history.push({...r,timestamp:i});const{onStart:s,onMove:o}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ii(t,this.transformPagePoint),I.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{if(this.end(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const{onEnd:n,onSessionEnd:r}=this.handlers,i=oi("pointercancel"===e.type?this.lastMoveEventInfo:ii(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!bt(e))return;this.handlers=t,this.transformPagePoint=n;const r=ii(St(e),this.transformPagePoint),{point:i}=r,{timestamp:s}=B;this.history=[{...i,timestamp:s}];const{onSessionStart:o}=t;o&&o(e,oi(r,this.history)),this.removeListeners=Vt(Ct(window,"pointermove",this.handlePointerMove),Ct(window,"pointerup",this.handlePointerUp),Ct(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),R(this.updatePoint)}}function ii(e,t){return t?{point:t(e.point)}:e}function si(e,t){return{x:e.x-t.x,y:e.y-t.y}}function oi({point:e},t){return{point:e,delta:si(e,li(t)),offset:si(e,ai(t)),velocity:ci(t,.1)}}function ai(e){return e[0]}function li(e){return e[e.length-1]}function ci(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=li(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Zt(t)));)n--;if(!r)return{x:0,y:0};const s=Wt(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ui(e){return e.max-e.min}function di(e,t=0,n=.01){return Math.abs(e-t)<=n}function hi(e,t,n,r=.5){e.origin=r,e.originPoint=Sn(t.min,t.max,e.origin),e.scale=ui(n)/ui(t),(di(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Sn(n.min,n.max,e.origin)-e.originPoint,(di(e.translate)||isNaN(e.translate))&&(e.translate=0)}function mi(e,t,n,r){hi(e.x,t.x,n.x,r?r.originX:void 0),hi(e.y,t.y,n.y,r?r.originY:void 0)}function pi(e,t,n){e.min=n.min+t.min,e.max=e.min+ui(t)}function fi(e,t,n){e.min=t.min-n.min,e.max=e.min+ui(t)}function gi(e,t,n){fi(e.x,t.x,n.x),fi(e.y,t.y,n.y)}function yi(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function vi(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const xi=.35;function wi(e,t,n){return{min:Ei(e,t),max:Ei(e,n)}}function Ei(e,t){return"number"==typeof e?e:e[t]||0}const bi=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),Si=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Pi(e){return[e("x"),e("y")]}function Ci({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Ti(e){return void 0===e||1===e}function Vi({scale:e,scaleX:t,scaleY:n}){return!Ti(e)||!Ti(t)||!Ti(n)}function Li(e){return Vi(e)||ki(e)||e.z||e.rotate||e.rotateX||e.rotateY}function ki(e){return Mi(e.x)||Mi(e.y)}function Mi(e){return e&&"0%"!==e}function Ai(e,t,n){return n+t*(e-n)}function _i(e,t,n,r,i){return void 0!==i&&(e=Ai(e,i,r)),Ai(e,n,r)+t}function Di(e,t=0,n=1,r,i){e.min=_i(e.min,t,n,r,i),e.max=_i(e.max,t,n,r,i)}function Ii(e,{x:t,y:n}){Di(e.x,t.translate,t.scale,t.originPoint),Di(e.y,n.translate,n.scale,n.originPoint)}function Ri(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Bi(e,t){e.min=e.min+t,e.max=e.max+t}function Oi(e,t,[n,r,i]){const s=void 0!==t[i]?t[i]:.5,o=Sn(e.min,e.max,s);Di(e,t[n],t[r],o,t.scale)}const ji=["x","scaleX","originX"],Fi=["y","scaleY","originY"];function Ni(e,t){Oi(e.x,t,ji),Oi(e.y,t,Fi)}function Hi(e,t){return Ci(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const zi=new WeakMap;class Ui{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Si(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;n&&!1===n.isPresent||(this.panSession=new ri(e,{onSessionStart:e=>{this.stopAnimation(),t&&this.snapToCursor(St(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=At(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pi((e=>{let t=this.getAxisMotionValue(e).get()||0;if(Oe.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];r&&(t=ui(r)*(parseFloat(t)/100))}}this.originPoint[e]=t})),i&&I.update((()=>i(e,t)),!1,!0);const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:o}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t)},{transformPagePoint:this.visualElement.getTransformPagePoint()}))}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&I.update((()=>i(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!$i(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?Sn(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?Sn(n,e,r.max):Math.min(e,n)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:n}=this.visualElement.projection||{},r=this.constraints;e&&J(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,{top:t,left:n,bottom:r,right:i}){return{x:yi(e.x,n,i),y:yi(e.y,t,r)}}(n.layoutBox,e),this.elastic=function(e=xi){return!1===e?e=0:!0===e&&(e=xi),{x:wi(e,"left","right"),y:wi(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Pi((e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!J(e))return!1;const n=e.current;Z(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=Hi(e,n),{scroll:i}=t;return i&&(Bi(r.x,i.offset.x),Bi(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:vi(e.x,t.x),y:vi(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Ci(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=Pi((o=>{if(!$i(o,t,this.currentDirection))return;let l=a&&a[o]||{};s&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(o,d)}));return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(Ar(e,n,0,t))}stopAnimation(){Pi((e=>this.getAxisMotionValue(e).stop()))}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps();return n[t]||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Pi((t=>{const{drag:n}=this.getProps();if(!$i(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-Sn(n,s,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!J(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Pi((e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=ui(e),i=ui(t);return i>r?n=$n(t.min,t.max-r,e.min):r>i&&(n=$n(e.min,e.max-i,t.min)),Te(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Pi((t=>{if(!$i(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(Sn(i,s,r[t]))}))}addListeners(){if(!this.visualElement.current)return;zi.set(this.visualElement,this);const e=Ct(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();J(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const i=Et(window,"resize",(()=>this.scalePositionWithinConstraints())),s=n.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(Pi((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=xi,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function $i(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const Gi=e=>(t,n)=>{e&&I.update((()=>e(t,n)))},Zi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Wi(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const qi={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!je.test(e))return e;e=parseFloat(e)}return`${Wi(e,t.target.x)}% ${Wi(e,t.target.y)}%`}},Ki={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=jn.parse(e);if(i.length>5)return r;const s=jn.createTransformer(e),o="number"!=typeof i[0]?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=l;const c=Sn(a,l,.5);return"number"==typeof i[2+o]&&(i[2+o]/=c),"number"==typeof i[3+o]&&(i[3+o]/=c),s(i)}};class Yi extends e.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;var s;s=Ji,Object.assign(fe,s),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Zi.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,s=n.projection;return s?(s.isPresent=i,r||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||I.postRender((()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Xi(t){const[n,r]=function(){const t=(0,e.useContext)(j);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=(0,e.useId)();return(0,e.useEffect)((()=>i(s)),[]),!n&&r?[!1,()=>r&&r(s)]:[!0]}(),i=(0,e.useContext)($);return e.createElement(Yi,{...t,layoutGroup:i,switchLayoutGroup:(0,e.useContext)(le),isPresent:n,safeToRemove:r})}const Ji={borderRadius:{...qi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qi,borderTopRightRadius:qi,borderBottomLeftRadius:qi,borderBottomRightRadius:qi,boxShadow:Ki},Qi=["TopLeft","TopRight","BottomLeft","BottomRight"],es=Qi.length,ts=e=>"string"==typeof e?parseFloat(e):e,ns=e=>"number"==typeof e||je.test(e);function rs(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const is=os(0,.5,cn),ss=os(.5,.95,A);function os(e,t,n){return r=>r<e?0:r>t?1:n($n(e,t,r))}function as(e,t){e.min=t.min,e.max=t.max}function ls(e,t){as(e.x,t.x),as(e.y,t.y)}function cs(e,t,n,r,i){return e=Ai(e-=t,1/n,r),void 0!==i&&(e=Ai(e,1/i,r)),e}function us(e,t,[n,r,i],s,o){!function(e,t=0,n=1,r=.5,i,s=e,o=e){if(Oe.test(t)&&(t=parseFloat(t),t=Sn(o.min,o.max,t/100)-o.min),"number"!=typeof t)return;let a=Sn(s.min,s.max,r);e===s&&(a-=t),e.min=cs(e.min,t,n,a,i),e.max=cs(e.max,t,n,a,i)}(e,t[n],t[r],t[i],t.scale,s,o)}const ds=["x","scaleX","originX"],hs=["y","scaleY","originY"];function ms(e,t,n,r){us(e.x,t,ds,n?n.x:void 0,r?r.x:void 0),us(e.y,t,hs,n?n.y:void 0,r?r.y:void 0)}function ps(e){return 0===e.translate&&1===e.scale}function fs(e){return ps(e.x)&&ps(e.y)}function gs(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ys(e){return ui(e.x)/ui(e.y)}class vs{constructor(){this.members=[]}add(e){Ir(this.members,e),e.scheduleRender()}remove(e){if(Rr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let e=t;e>=0;e--){const t=this.members[e];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xs(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:e,rotateX:t,rotateY:i}=n;e&&(r+=`rotate(${e}deg) `),t&&(r+=`rotateX(${t}deg) `),i&&(r+=`rotateY(${i}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return 1===o&&1===a||(r+=`scale(${o}, ${a})`),r||"none"}const ws=(e,t)=>e.depth-t.depth;class Es{constructor(){this.children=[],this.isDirty=!1}add(e){Ir(this.children,e),this.isDirty=!0}remove(e){Rr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ws),this.isDirty=!1,this.children.forEach(e)}}const bs=["","X","Y","Z"];let Ss=0;const Ps={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Cs({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=Ss++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;Ps.totalNodes=Ps.resolvedTargetDeltas=Ps.recalculatedProjection=0,this.nodes.forEach(Ls),this.nodes.forEach(Rs),this.nodes.forEach(Bs),this.nodes.forEach(ks),e=Ps,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new Es)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Br),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,n=this.root.hasTreeAnimated){if(this.instance)return;var r;this.isSVG=(r=t)instanceof SVGElement&&"svg"!==r.tagName,this.instance=t;const{layoutId:i,layout:s,visualElement:o}=this.options;if(o&&!o.current&&o.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||i)&&(this.isLayoutDirty=!0),e){let n;const r=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=({timestamp:t})=>{const i=t-n;i>=250&&(R(r),e(i-250))};return I.read(r,!0),()=>R(r)}(r),Zi.hasAnimatedSinceResize&&(Zi.hasAnimatedSinceResize=!1,this.nodes.forEach(Is))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||s)&&this.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||zs,{onLayoutAnimationStart:s,onLayoutAnimationComplete:a}=o.getProps(),l=!this.targetLayout||!gs(this.targetLayout,r)||n,c=!t&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...Mr(i,"layout"),onPlay:s,onComplete:a};(o.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||Is(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,R(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Os),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){const t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(As);this.isUpdating||this.nodes.forEach(_s),this.isUpdating=!1,this.nodes.forEach(Ds),this.nodes.forEach(Ts),this.nodes.forEach(Vs),this.clearAllSnapshots();const e=performance.now();B.delta=Te(0,1e3/60,e-B.timestamp),B.timestamp=e,B.isProcessing=!0,O.update.process(B),O.preRender.process(B),O.render.process(B),B.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(Ms),this.sharedNodes.forEach(js)}scheduleUpdateProjection(){I.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){I.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Si(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!fs(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&(t||Li(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),Gs((r=n).x),Gs(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return Si();const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(Bi(t.x,n.offset.x),Bi(t.y,n.offset.y)),t}removeElementScroll(e){const t=Si();ls(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:s}=r;if(r!==this.root&&i&&s.layoutScroll){if(i.isRoot){ls(t,e);const{scroll:n}=this.root;n&&(Bi(t.x,-n.offset.x),Bi(t.y,-n.offset.y))}Bi(t.x,i.offset.x),Bi(t.y,i.offset.y)}}return t}applyTransform(e,t=!1){const n=Si();ls(n,e);for(let e=0;e<this.path.length;e++){const r=this.path[e];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ni(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),Li(r.latestValues)&&Ni(n,r.latestValues)}return Li(this.latestValues)&&Ni(n,this.latestValues),n}removeTransform(e){const t=Si();ls(t,e);for(let e=0;e<this.path.length;e++){const n=this.path[e];if(!n.instance)continue;if(!Li(n.latestValues))continue;Vi(n.latestValues)&&n.updateSnapshot();const r=Si();ls(r,n.measurePageBox()),ms(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,r)}return Li(this.latestValues)&&ms(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==B.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=B.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Si(),this.relativeTargetOrigin=Si(),gi(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),ls(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,l;if(this.target||(this.target=Si(),this.targetWithTransforms=Si()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,pi(o.x,a.x,l.x),pi(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):ls(this.target,this.layout.layoutBox),Ii(this.target,this.targetDelta)):ls(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Si(),this.relativeTargetOrigin=Si(),gi(this.relativeTargetOrigin,this.target,e.target),ls(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ps.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Vi(this.parent.latestValues)&&!ki(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===B.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;ls(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n,r=!1){const i=n.length;if(!i)return;let s,o;t.x=t.y=1;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const i=s.instance;i&&i.style&&"contents"===i.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ni(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Ii(e,o)),r&&Li(s.latestValues)&&Ni(e,s.latestValues))}t.x=Ri(t.x),t.y=Ri(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta=bi(),this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta=bi(),this.projectionDeltaWithTransform=bi());const c=this.projectionTransform;mi(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=xs(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===o&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Ps.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},s=bi();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o=Si(),a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(Hs));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,m,p,f,g;Fs(s.x,e.x,n),Fs(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gi(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m=this.relativeTarget,p=this.relativeTargetOrigin,f=o,g=n,Ns(m.x,p.x,f.x,g),Ns(m.y,p.y,f.y,g),d&&(l=this.relativeTarget,h=d,l.x.min===h.x.min&&l.x.max===h.x.max&&l.y.min===h.y.min&&l.y.max===h.y.max)&&(this.isProjectionDirty=!1),d||(d=Si()),ls(d,this.relativeTarget)),a&&(this.animationValues=i,function(e,t,n,r,i,s){i?(e.opacity=Sn(0,void 0!==n.opacity?n.opacity:1,is(r)),e.opacityExit=Sn(void 0!==t.opacity?t.opacity:1,0,ss(r))):s&&(e.opacity=Sn(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let i=0;i<es;i++){const s=`border${Qi[i]}Radius`;let o=rs(t,s),a=rs(n,s);void 0===o&&void 0===a||(o||(o=0),a||(a=0),0===o||0===a||ns(o)===ns(a)?(e[s]=Math.max(Sn(ts(o),ts(a),r),0),(Oe.test(a)||Oe.test(o))&&(e[s]+="%")):e[s]=a)}(t.rotate||n.rotate)&&(e.rotate=Sn(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(R(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=I.update((()=>{Zi.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=xe(0)?0:Fr(0);return r.start(Ar("",r,1e3,n)),r.animation}(0,0,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Zs(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||Si();const t=ui(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=ui(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}ls(t,n),Ni(t,i),mi(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new vs),this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let t=0;t<bs.length;t++){const i="rotate"+bs[t];n[i]&&(r[i]=n[i],e.setStaticValue(i,0))}e.render();for(const t in r)e.setStaticValue(t,r[t]);e.scheduleRender()}getProjectionStyles(e={}){var t,n;const r={};if(!this.instance||this.isSVG)return r;if(!this.isVisible)return{visibility:"hidden"};r.visibility="";const i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=gt(e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=gt(e.pointerEvents)||""),this.hasProjected&&!Li(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),r.transform=xs(this.projectionDeltaWithTransform,this.treeScale,o),i&&(r.transform=i(o,r.transform));const{x:a,y:l}=this.projectionDelta;r.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,s.animationValues?r.opacity=s===this?null!==(n=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:r.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const e in fe){if(void 0===o[e])continue;const{correct:t,applyTo:n}=fe[e],i="none"===r.transform?o[e]:t(o[e],s);if(n){const e=n.length;for(let t=0;t<e;t++)r[n[t]]=i}else r[e]=i}return this.options.layoutId&&(r.pointerEvents=s===this?gt(e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(As),this.root.sharedNodes.clear()}}}function Ts(e){e.updateLayout()}function Vs(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,s=n.source!==e.layout.source;"size"===i?Pi((e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],i=ui(r);r.min=t[e].min,r.max=r.min+i})):Zs(i,n.layoutBox,t)&&Pi((r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],o=ui(t[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)}));const o=bi();mi(o,t,n.layoutBox);const a=bi();s?mi(a,e.applyTransform(r,!0),n.measuredBox):mi(a,t,n.layoutBox);const l=!fs(o);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const o=Si();gi(o,n.layoutBox,i.layoutBox);const a=Si();gi(a,t,s.layoutBox),gs(o,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Ls(e){Ps.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function ks(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Ms(e){e.clearSnapshot()}function As(e){e.clearMeasurements()}function _s(e){e.isLayoutDirty=!1}function Ds(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Is(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Rs(e){e.resolveTargetDelta()}function Bs(e){e.calcProjection()}function Os(e){e.resetRotation()}function js(e){e.removeLeadSnapshot()}function Fs(e,t,n){e.translate=Sn(t.translate,0,n),e.scale=Sn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ns(e,t,n,r){e.min=Sn(t.min,n.min,r),e.max=Sn(t.max,n.max,r)}function Hs(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const zs={duration:.45,ease:[.4,0,.1,1]},Us=e=>"undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().includes(e),$s=Us("applewebkit/")&&!Us("chrome/")?Math.round:A;function Gs(e){e.min=$s(e.min),e.max=$s(e.max)}function Zs(e,t,n){return"position"===e||"preserve-aspect"===e&&!di(ys(t),ys(n),.2)}const Ws=Cs({attachResizeListener:(e,t)=>Et(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qs={current:void 0},Ks=Cs({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!qs.current){const e=new Ws({});e.mount(window),e.setOptions({layoutScroll:!0}),qs.current=e}return qs.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Ys={pan:{Feature:class extends Dt{constructor(){super(...arguments),this.removePointerDownListener=A}onPointerDown(e){this.session=new ri(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Gi(e),onStart:Gi(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&I.update((()=>r(e,t)))}}}mount(){this.removePointerDownListener=Ct(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Dt{constructor(e){super(e),this.removeGroupControls=A,this.removeListeners=A,this.controls=new Ui(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||A}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Ks,MeasureLayout:Xi}},Xs=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Js(e,t,n=1){Z(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[r,i]=function(e){const t=Xs.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return Dr(e)?parseFloat(e):e}return Pe(i)?Js(i,t,n+1):i}const Qs=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),eo=e=>Qs.has(e),to=e=>e===Ve||e===je,no=(e,t)=>parseFloat(e.split(", ")[t]),ro=(e,t)=>(n,{transform:r})=>{if("none"===r||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return no(i[1],t);{const t=r.match(/^matrix\((.+)\)$/);return t?no(t[1],e):0}},io=new Set(["x","y","z"]),so=ge.filter((e=>!io.has(e))),oo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:ro(4,13),y:ro(5,14)};oo.translateX=oo.x,oo.translateY=oo.y;function ao(e,t,n,r){return(e=>Object.keys(e).some(eo))(t)?((e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(eo);let s=[],o=!1;const a=[];if(i.forEach((i=>{const l=e.getValue(i);if(!e.hasValue(i))return;let c=n[i],u=zr(c);const d=t[i];let h;if(mt(d)){const e=d.length,t=null===d[0]?1:0;c=d[t],u=zr(c);for(let n=t;n<e&&null!==d[n];n++)h?Z(zr(d[n])===h,"All keyframes must be of the same type"):(h=zr(d[n]),Z(h===u||to(u)&&to(h),"Keyframes must be of the same dimension as the current value"))}else h=zr(d);if(u!==h)if(to(u)&&to(h)){const e=l.get();"string"==typeof e&&l.set(parseFloat(e)),"string"==typeof d?t[i]=parseFloat(d):Array.isArray(d)&&h===je&&(t[i]=d.map(parseFloat))}else(null==u?void 0:u.transform)&&(null==h?void 0:h.transform)&&(0===c||0===d)?0===c?l.set(h.transform(c)):t[i]=u.transform(d):(o||(s=function(e){const t=[];return so.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),o=!0),a.push(i),r[i]=void 0!==r[i]?r[i]:t[i],l.jump(d))})),a.length){const n=a.indexOf("height")>=0?window.pageYOffset:null,i=((e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:o}=s,a={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((e=>{a[e]=oo[e](r,s)})),t.render();const l=t.measureViewportBox();return n.forEach((n=>{const r=t.getValue(n);r&&r.jump(a[n]),e[n]=oo[n](l,s)})),e})(t,e,a);return s.length&&s.forEach((([t,n])=>{e.getValue(t).set(n)})),e.render(),L&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:t,transitionEnd:r}})(e,t,n,r):{target:t,transitionEnd:r}}const lo={current:null},co={current:!1},uo=new WeakMap,ho=Object.keys(ae),mo=ho.length,po=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],fo=ne.length;class go{constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,visualState:i},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>I.render(this.render,!1,!0);const{latestValues:o,renderState:a}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=a,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=s,this.isControllingVariants=re(t),this.isVariantNode=ie(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:l,...c}=this.scrapeMotionValuesFromProps(t,{});for(const e in c){const t=c[e];void 0!==o[e]&&xe(t)&&(t.set(o[e],!1),_r(l)&&l.add(e))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,uo.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),co.current||function(){if(co.current=!0,L)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>lo.current=e.matches;e.addListener(t),t()}else lo.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||lo.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){uo.delete(this.current),this.projection&&this.projection.unmount(),R(this.notifyUpdate),R(this.render),this.valueSubscriptions.forEach((e=>e())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=ye.has(e),r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&I.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(()=>{r(),i()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures({children:e,...t},n,r,i){let s,o;for(let e=0;e<mo;e++){const n=ho[e],{isEnabled:r,Feature:i,ProjectionNode:a,MeasureLayout:l}=ae[n];a&&(s=a),r(t)&&(!this.features[n]&&i&&(this.features[n]=new i(this)),l&&(o=l))}if(!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:n,drag:r,dragConstraints:o,layoutScroll:a,layoutRoot:l}=t;this.projection.setOptions({layoutId:e,layout:n,alwaysMeasureLayout:Boolean(r)||o&&J(o),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"==typeof n?n:"both",initialPromotionConfig:i,layoutScroll:a,layoutRoot:l})}return o}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Si()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<po.length;t++){const n=po[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const r=e["on"+n];r&&(this.propEventSubscriptions[n]=this.on(n,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],o=n[i];if(xe(s))e.addValue(i,s),_r(r)&&r.add(i);else if(xe(o))e.addValue(i,Fr(s,{owner:e})),_r(r)&&r.remove(i);else if(o!==s)if(e.hasValue(i)){const t=e.getValue(i);!t.hasAnimated&&t.set(s)}else{const t=e.getStaticValue(i);e.addValue(i,Fr(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const t={};for(let e=0;e<fo;e++){const n=ne[e],r=this.props[n];(Q(r)||!1===r)&&(t[n]=r)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Fr(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"==typeof n||"object"==typeof n?null===(t=ht(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||xe(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new Br),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class yo extends go{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...n},{transformValues:r},i){let s=function(e,t,n){const r={};for(const i in e){const e=Gr(i,t);if(void 0!==e)r[i]=e;else{const e=n.getValue(i);e&&(r[i]=e.get())}}return r}(n,e||{},this);if(r&&(t&&(t=r(t)),n&&(n=r(n)),s&&(s=r(s))),i){!function(e,t,n){var r,i;const s=Object.keys(t).filter((t=>!e.hasValue(t))),o=s.length;var a;if(o)for(let l=0;l<o;l++){const o=s[l],c=t[o];let u=null;Array.isArray(c)&&(u=c[0]),null===u&&(u=null!==(i=null!==(r=n[o])&&void 0!==r?r:e.readValue(o))&&void 0!==i?i:t[o]),null!=u&&("string"==typeof u&&(Dr(u)||Lr(u))?u=parseFloat(u):(a=u,!Ur.find(Nr(a))&&jn.test(c)&&(u=Vr(o,c))),e.addValue(o,Fr(u,{owner:e})),void 0===n[o]&&(n[o]=u),null!==u&&e.setBaseTarget(o,u))}}(this,n,s);const e=((e,t,n,r)=>{const i=function(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach((e=>{const t=e.get();if(!Pe(t))return;const n=Js(t,r);n&&e.set(n)}));for(const e in t){const i=t[e];if(!Pe(i))continue;const s=Js(i,r);s&&(t[e]=s,n||(n={}),void 0===n[e]&&(n[e]=i))}return{target:t,transitionEnd:n}}(e,t,r);return ao(e,t=i.target,n,r=i.transitionEnd)})(this,n,s,t);t=e.transitionEnd,n=e.target}return{transition:e,transitionEnd:t,...n}}}class vo extends yo{readValueFromInstance(e,t){if(ye.has(t)){const e=Tr(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(Se(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof i?i.trim():i}var n}measureInstanceViewportBox(e,{transformPagePoint:t}){return Hi(e,t)}build(e,t,n,r){$e(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return ut(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xe(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}renderInstance(e,t,n,r){at(e,t,n,r)}}class xo extends yo{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ye.has(t)){const e=Tr(t);return e&&e.default||0}return t=lt.has(t)?t:ot(t),e.getAttribute(t)}measureInstanceViewportBox(){return Si()}scrapeMotionValuesFromProps(e,t){return dt(e,t)}build(e,t,n,r){tt(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){ct(e,t,0,r)}mount(e){this.isSVGTag=rt(e.tagName),super.mount(e)}}const wo=(e,t)=>pe(e)?new xo(t,{enableHardwareAcceleration:!1}):new vo(t,{enableHardwareAcceleration:!0}),Eo={...ti,...zt,...Ys,layout:{ProjectionNode:Ks,MeasureLayout:Xi}},bo=he(((e,t)=>function(e,{forwardMotionProps:t=!1},n,r){return{...pe(e)?xt:wt,preloadedFeatures:n,useRender:st(t),createVisualElement:r,Component:e}}(e,t,Eo,wo))),So=({value:t,className:n,onChange:r,onKeyDown:i,disabled:s,placeholder:o})=>{const a=(0,l.useRef)(null),[c,u]=(0,l.useState)("auto");return(0,l.useLayoutEffect)((()=>{const e=document.createElement("textarea");e.value=t||o,e.rows=1;const n=window.getComputedStyle(a.current);["paddingTop","paddingBottom","paddingLeft","paddingRight","width","fontFamily","fontSize","borderWidth"].forEach((t=>e.style[t]=n[t])),Object.assign(e.style,{position:"absolute",left:"-9999px"}),document.body.appendChild(e),u(`${e.scrollHeight}px`),document.body.removeChild(e)}),[t,o]),(0,l.useEffect)((()=>{const e=a.current;if(!e)return;if(document.activeElement===e)return;const t=e.value.length;e.focus(),e.setSelectionRange(t,t)}),[t]),(0,e.createElement)(q,null,(0,e.createElement)(bo.div,{className:"w-full m-0.5",key:"input",animate:{height:c},transition:{duration:.2},style:{lineHeight:0}},(0,e.createElement)("label",{htmlFor:"draft-ai-textarea",className:"sr-only"},o),(0,e.createElement)("textarea",{ref:a,id:"draft-ai-textarea",disabled:s,className:n,value:t,rows:1,onChange:r,onKeyDown:i,onScroll:e=>{e.target.scrollTop=0},placeholder:o})))},Po=({inputText:n,setInputText:r,ready:i,setReady:o,setPrompt:a,loading:l})=>{const{selectedText:c}=E(),u=e=>{e.preventDefault(),i&&!l&&(r(""),o(!1),a({text:c?`${n}: ${c}`:n,promptType:c?"custom-requests":"create",systemMessageKey:c?"edit":"generate"}))};return(0,e.createElement)("form",{className:"relative flex items-start",onSubmit:u},(0,e.createElement)(p,{icon:b,className:"text-wp-theme-main fill-current w-5 h-5 absolute left-2 top-3.5"}),(0,e.createElement)(So,{disabled:l,placeholder:l?(0,s.__)("AI is writing...","extendify-local"):c?(0,s.__)("Ask AI to edit","extendify-local"):(0,s.__)("Ask AI to generate text","extendify-local"),value:n,className:"bg-transparent border-transparent outline-none rounded-none focus:ring-1 focus:ring-wp-theme-main w-full h-full px-10 py-3 overflow-hidden resize-none",onChange:e=>{r(e.target.value),o(e.target.value.length>0)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u(e))}}),l&&(0,e.createElement)("div",{className:"text-gray-700 absolute right-4 w-4 h-4 p-1 top-3.5"},(0,e.createElement)(t.Spinner,{style:{margin:"0"}})),!l&&(0,e.createElement)("button",{type:"submit",disabled:!i,"aria-label":(0,s.__)("Submit","extendify-local"),className:V()("bg-transparent border-none absolute right-2 p-0 top-3.5",{"cursor-pointer text-gray-700 hover:text-design-main":i,"text-gray-500":!i})},(0,e.createElement)(p,{icon:C,onClick:u,className:"fill-current w-6 h-6"})))},Co=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M16 10h4c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1h-4c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1zm-8 4H4c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1h4c.6 0 1-.4 1-1v-4c0-.6-.4-1-1-1zm10-2.6L14.5 15l1.1 1.1 1.7-1.7c-.1 1.1-.3 2.3-.9 2.9-.3.3-.7.5-1.3.5h-4.5v1.5H15c.9 0 1.7-.3 2.3-.9 1-1 1.3-2.7 1.4-4l1.8 1.8 1.1-1.1-3.6-3.7zM6.8 9.7c.1-1.1.3-2.3.9-2.9.4-.4.8-.6 1.3-.6h4.5V4.8H9c-.9 0-1.7.3-2.3.9-1 1-1.3 2.7-1.4 4L3.5 8l-1 1L6 12.6 9.5 9l-1-1-1.7 1.7z"})),To=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M2 12c0 3.6 2.4 5.5 6 5.5h.5V19l3-2.5-3-2.5v2H8c-2.5 0-4.5-1.5-4.5-4s2-4.5 4.5-4.5h3.5V6H8c-3.6 0-6 2.4-6 6zm19.5-1h-8v1.5h8V11zm0 5h-8v1.5h8V16zm0-10h-8v1.5h8V6z"})),Vo=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,e.createElement)(d.Path,{d:"M9 12h2v-2h2V8h-2V6H9v2H7v2h2v2zm1 4c3.9 0 7-3.1 7-7s-3.1-7-7-7-7 3.1-7 7 3.1 7 7 7zm0-12c2.8 0 5 2.2 5 5s-2.2 5-5 5-5-2.2-5-5 2.2-5 5-5zM3 19h14v-2H3v2z"})),Lo=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M12 4V2.2L9 4.8l3 2.5V5.5c3.6 0 6.5 2.9 6.5 6.5 0 2.9-1.9 5.3-4.5 6.2v.2l-.1-.2c-.4.1-.7.2-1.1.2l.2 1.5c.3 0 .6-.1 1-.2 3.5-.9 6-4 6-7.7 0-4.4-3.6-8-8-8zm-7.9 7l1.5.2c.1-1.2.5-2.3 1.2-3.2l-1.1-.9C4.8 8.2 4.3 9.6 4.1 11zm1.5 1.8l-1.5.2c.1.7.3 1.4.5 2 .3.7.6 1.3 1 1.8l1.2-.8c-.3-.5-.6-1-.8-1.5s-.4-1.1-.4-1.7zm1.5 5.5c1.1.9 2.4 1.4 3.8 1.6l.2-1.5c-1.1-.1-2.2-.5-3.1-1.2l-.9 1.1z"})),ko=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),Mo=({prompt:n,completion:r,loading:i,setPrompt:o,setInputText:u})=>{const{toggleHighlight:d,toggleInsertionPoint:h}=x(),{insertBlocks:m,replaceBlocks:f}=(0,a.useDispatch)(w.store),{getSelectedBlock:g,getSelectedBlockClientIds:y,getBlockRootClientId:v,getBlockIndex:E,getBlock:b}=(0,a.useSelect)((e=>e(w.store)),[]),S=g(),P=y(),C=e=>{const t=(0,c.pasteHandler)({plainText:e});return Array.isArray(t)?t:[(0,c.createBlock)("core/paragraph",{content:t})]},T=({replaceContent:e=!1,position:t})=>{o({text:"",promptType:"",systemMessageKey:""});const n=S?S?.clientId:P[0],i=b(n),s=C(r);if(!n||"end"===t)return void m(s);if("top"===t)return void m(s,0);const a=""===i?.attributes?.content,l=v(n),c=E(P.at(-1),l);if(!e&&!a)return void m(s,c+1,l);const u=(e,t)=>Object.prototype.hasOwnProperty.call(e?.attributes,"content")&&Object.prototype.hasOwnProperty.call(t?.attributes,"content"),d=1===s.length&&u(i,s[0]),h=s.map((e=>({...e,name:d?i.name:e.name,attributes:{...i.attributes,content:(u(e,i),e?.attributes?.content)}})));f(P,h)};return(0,l.useEffect)((()=>()=>{d(P,{isHighlighted:!1})}),[P,d]),(0,e.createElement)(t.MenuGroup,null,(0,e.createElement)(t.MenuItem,{onClick:()=>T({replaceContent:!0}),onMouseEnter:()=>d(P,{isHighlighted:!0}),onMouseLeave:()=>d(P,{isHighlighted:!1}),disabled:i||!(()=>{const e=S||b(P[0]);if(!e)return!1;if(["core/list-item","core/button"].includes(e?.name)){const t=C(r);return t[0]?.name===e?.name}return!0})(),icon:Co,iconPosition:"left","data-test":"replace-selected"},(0,s.__)("Replace selected block text","extendify-local")),(0,e.createElement)(t.MenuItem,{onClick:()=>T({replaceContent:!1,position:"top"}),disabled:i,iconPosition:"left","data-test":"insert-top"},(0,e.createElement)("div",{className:"-ml-1"},(0,e.createElement)(p,{icon:To,className:"rotate-180"})),(0,e.createElement)("div",{className:"px-1"},(0,s.__)("Insert at top","extendify-local"))),(0,e.createElement)(t.MenuItem,{onClick:()=>T({replaceContent:!1}),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),disabled:i||!(()=>{const e=S||b(P[0]);return!e||!["core/list-item","core/button"].includes(e?.name)})(),icon:Vo,iconPosition:"left","data-test":"insert-after"},(0,s.__)("Insert after the selected text","extendify-local")),(0,e.createElement)(t.MenuItem,{onClick:()=>T({replaceContent:!1,position:"end"}),disabled:i,icon:To,iconPosition:"left","data-test":"insert-bottom"},(0,s.__)("Insert at bottom","extendify-local")),(0,e.createElement)(t.__experimentalDivider,null),(0,e.createElement)(t.MenuItem,{onClick:()=>{u(""),o({text:"",promptType:"",systemMessageKey:""}),setTimeout((()=>o(n)))},disabled:i,icon:Lo,iconPosition:"left","data-test":"try-again-button"},(0,s.__)("Try again","extendify-local")),(0,e.createElement)(t.MenuItem,{onClick:()=>{u(""),o({text:"",promptType:"",systemMessageKey:""})},disabled:i,icon:ko,iconPosition:"left","data-test":"discard-button"},(0,s.__)("Discard","extendify-local")))},Ao=h,_o=({loading:n})=>{const[r,i]=(0,l.useState)(),{clearSelectedBlock:o}=(0,a.useDispatch)(w.store),{selectedText:c}=E();if((0,l.useEffect)((()=>{i(c)}),[i,c]),r)return(0,e.createElement)("div",{className:"flex space-x-2 rounded-sm border-none bg-gray-100 overflow-hidden mb-4 p-3","data-test":"existing-text-container"},(0,e.createElement)("div",null,(0,e.createElement)(p,{icon:Ao,className:"fill-current"})),(0,e.createElement)("div",null,(0,e.createElement)("div",{className:"mb-1 text-pretty text-gray-800",dangerouslySetInnerHTML:{__html:r.split(" ").length<=20?r:`${r.split(" ",14).join(" ")}... ${r.slice(r.lastIndexOf(" ")-14)}`}}),(0,e.createElement)("div",{className:"mt-3 w-full flex justify-end"},(0,e.createElement)(t.Button,{size:"compact",onClick:o,disabled:n,icon:ko,iconPosition:"right",className:"text-gray-800 bg-gray-300 rounded relative cursor-pointer hover:bg-gray-400 flex-row-reverse","data-test":"remove-selection"},(0,s.__)("Remove selection","extendify-local")))))},Do=window.wp.apiFetch;var Io=n.n(Do);const Ro=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=t=e(r,i,s);return s};var Bo=n(798);const{useDebugValue:Oo}=e,{useSyncExternalStoreWithSelector:jo}=Bo;let Fo=!1;const No=e=>e,Ho=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?Ro(e):Ro)(e):e,n=(e,n)=>function(e,t=No,n){n&&!Fo&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Fo=!0);const r=jo(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Oo(r),r}(t,e,n);return Object.assign(n,t),n},zo=e=>e?Ho(e):Ho,Uo=new Map,$o=e=>{const t=Uo.get(e);return t?Object.fromEntries(Object.entries(t.stores).map((([e,t])=>[e,t.getState()]))):{}},Go=(e,t={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:o,store:a,...l}=t;let c;try{c=(null==s||s)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!c)return s&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,i);const{connection:u,...d}=((e,t,n)=>{if(void 0===e)return{type:"untracked",connection:t.connect(n)};const r=Uo.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return Uo.set(n.name,i),{type:"tracked",store:e,...i}})(a,c,l);let h=!0;i.setState=(e,t,s)=>{const c=n(e,t);if(!h)return c;const d=void 0===s?{type:o||"anonymous"}:"string"==typeof s?{type:s}:s;return void 0===a?(null==u||u.send(d,r()),c):(null==u||u.send({...d,type:`${a}/${d.type}`},{...$o(l.name),[a]:i.getState()}),c)};const m=(...e)=>{const t=h;h=!1,n(...e),h=t},p=e(i.setState,r,i);if("untracked"===d.type?null==u||u.init(p):(d.stores[d.store]=i,null==u||u.init(Object.fromEntries(Object.entries(d.stores).map((([e,t])=>[e,e===d.store?p:t.getState()]))))),i.dispatchFromDevtools&&"function"==typeof i.dispatch){let e=!1;const t=i.dispatch;i.dispatch=(...n)=>{"__setState"!==n[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),t(...n)}}return u.subscribe((e=>{var t;switch(e.type){case"ACTION":return"string"!=typeof e.payload?void console.error("[zustand devtools middleware] Unsupported action format"):Zo(e.payload,(e=>{if("__setState"!==e.type)i.dispatchFromDevtools&&"function"==typeof i.dispatch&&i.dispatch(e);else{if(void 0===a)return void m(e.state);1!==Object.keys(e.state).length&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const t=e.state[a];if(null==t)return;JSON.stringify(i.getState())!==JSON.stringify(t)&&m(t)}}));case"DISPATCH":switch(e.payload.type){case"RESET":return m(p),void 0===a?null==u?void 0:u.init(i.getState()):null==u?void 0:u.init($o(l.name));case"COMMIT":return void 0===a?void(null==u||u.init(i.getState())):null==u?void 0:u.init($o(l.name));case"ROLLBACK":return Zo(e.state,(e=>{if(void 0===a)return m(e),void(null==u||u.init(i.getState()));m(e[a]),null==u||u.init($o(l.name))}));case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Zo(e.state,(e=>{void 0!==a?JSON.stringify(i.getState())!==JSON.stringify(e[a])&&m(e[a]):m(e)}));case"IMPORT_STATE":{const{nextLiftedState:n}=e.payload,r=null==(t=n.computedStates.slice(-1)[0])?void 0:t.state;if(!r)return;return m(void 0===a?r:r[a]),void(null==u||u.send(null,n))}case"PAUSE_RECORDING":return h=!h}return}})),p},Zo=(e,t)=>{let n;try{n=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==n&&t(n)};function Wo(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;const i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(r=n.getItem(e))?r:null;return s instanceof Promise?s.then(i):i(s)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}const qo=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>qo(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>qo(t)(e)}}},Ko=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),((e,t)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch(e){}if(!c)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...e)}),r,i);const u=qo(s.serialize),d=()=>{const e=s.partialize({...r()});let t;const n=u({state:e,version:s.version}).then((e=>c.setItem(s.name,e))).catch((e=>{t=e}));if(t)throw t;return n},h=i.setState;i.setState=(e,t)=>{h(e,t),d()};const m=e(((...e)=>{n(...e),d()}),r,i);let p;const f=()=>{var e;if(!c)return;o=!1,a.forEach((e=>e(r())));const t=(null==(e=s.onRehydrateStorage)?void 0:e.call(s,r()))||void 0;return qo(c.getItem.bind(c))(s.name).then((e=>{if(e)return s.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return e.state;if(s.migrate)return s.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return p=s.merge(e,null!=(t=r())?t:m),n(p,!0),d()})).then((()=>{null==t||t(p,void 0),o=!0,l.forEach((e=>e(p)))})).catch((e=>{null==t||t(void 0,e)}))};return i.persist={setOptions:e=>{s={...s,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},f(),p||m})(e,t)):((e,t)=>(n,r,i)=>{let s={storage:Wo((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...e)}),r,i);const u=()=>{const e=s.partialize({...r()});return c.setItem(s.name,{state:e,version:s.version})},d=i.setState;i.setState=(e,t)=>{d(e,t),u()};const h=e(((...e)=>{n(...e),u()}),r,i);let m;i.getInitialState=()=>h;const p=()=>{var e,t;if(!c)return;o=!1,a.forEach((e=>{var t;return e(null!=(t=r())?t:h)}));const i=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=r())?e:h))||void 0;return qo(c.getItem.bind(c))(s.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return e.state;if(s.migrate)return s.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}})).then((e=>{var t;return m=s.merge(e,null!=(t=r())?t:h),n(m,!0),u()})).then((()=>{null==i||i(m,void 0),m=r(),o=!0,l.forEach((e=>e(m)))})).catch((e=>{null==i||i(void 0,e)}))};return i.persist={setOptions:e=>{s={...s,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},s.skipHydration||p(),m||h})(e,t),Yo=e=>{try{return JSON.parse(e)}catch(e){return{}}},Xo="/extendify/v1/draft/user-settings",Jo={getItem:async()=>await Io()({path:Xo}),setItem:async(e,t)=>await Io()({path:Xo,method:"POST",data:{state:t}})},Qo={aiImageOptions:{prompt:"",style:"vivid",size:"1024x1024"},imageCredits:{remaining:10,total:10,refresh:void 0}},ea=zo(Ko(Go((e=>({...Qo,...Yo(window.extDraftData?.globalState)?.state,updateImageCredits({remaining:t,total:n,refresh:r}){e((e=>({imageCredits:{...e.imageCredits,...t&&{remaining:t},...n&&{total:n},...r&&{refresh:r}}})))},subtractOneCredit(){e((e=>({imageCredits:{...e.imageCredits,remaining:e.imageCredits.remaining-1,refresh:new Date(Date.now()+864e5).getTime()}})))},resetImageCredits(){e({imageCredits:Qo.imageCredits})},setAiImageOption(t,n){e((e=>({aiImageOptions:{...e.aiImageOptions,[t]:n}})))}})),{name:"Extendify Draft Globals"}),{name:"extendify_draft_settings",storage:Wo((()=>Jo)),skipHydration:!0,partialize:e=>({...e,aiImageOptions:{...e.aiImageOptions,prompt:""}})})),ta="https://ai.extendify.com",na=["siteId","partnerId","wpVersion","wpLanguage","devbuild","isBlockTheme","showAIConsent","userGaveConsent","userId"],ra={...Object.fromEntries(Object.entries(window.extSharedData).filter((([e])=>na.includes(e))))},ia=async(e="")=>{const t=new URLSearchParams({...ra});e&&t.append("query",e);const n=await fetch(`${ta}/api/draft/image/unsplash?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Bad response from server");const r=await n.json();if(!Array.isArray(r))throw new Error("Bad response from server");return{images:r,total:n.headers.get("X-Total"),perPage:n.headers.get("X-Per-Page"),requestID:n.headers.get("X-Request-Id")}},sa=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M1.33333 1h9.33337c.1841 0 .3333.14924.3333.33333v5.57118L9.0152 4.97484c-.19406-.18867-.50302-.18867-.69708 0L5.93734 7.28948 3.98622 6.02487c-.17383-.11267-.39915-.10648-.56653.01557L1 7.8048V1.33333C1 1.14924 1.14924 1 1.33333 1ZM1 9.04241v1.62429c0 .1841.14924.3333.33333.3333h9.33337c.1841 0 .3333-.1492.3333-.3333V8.26877l-.0152.01565-2.31814-2.25373-2.31813 2.25373c-.16726.16261-.42473.18796-.62049.06108L3.73095 7.05109 1 9.04241ZM0 1.33333C0 .596954.596954 0 1.33333 0h9.33337C11.403 0 12 .596954 12 1.33333v9.33337C12 11.403 11.403 12 10.6667 12H1.33333C.596954 12 0 11.403 0 10.6667V1.33333Z",clipRule:"evenodd"})),oa=({usedCredits:n,total:r})=>n<r?(0,e.createElement)("div",{className:"flex justify-center items-center gap-2"},(0,e.createElement)(t.Icon,{className:"fill-gray-700",icon:sa,size:"12px"}),(0,e.createElement)("p",{className:"text-gray-700 text-[12px] mb-0"},(0,s.sprintf)(
// translators: %1$s is the number of used credits, %2$s is the total credits
(0,s.__)("%1$s of %2$s daily image credits used","extendify-local"),n,r))):(0,e.createElement)("div",{className:"flex gap-3 p-3 bg-gray-100 border-l-4 border-r-0 border-y-0 border-solid border-[#3858E9]"},(0,e.createElement)("div",null,(0,e.createElement)(t.Icon,{icon:sa,className:"fill-gray-900",size:"12px"})),(0,e.createElement)("div",{className:"flex flex-col gap-2"},(0,e.createElement)("p",{className:"text-gray-700 text-[12px] mb-0 font-bold"},(0,s.sprintf)(
// translators: %1$s is the number of used credits, %2$s is the total credits
(0,s.__)("%1$s of %2$s daily image credits used","extendify-local"),n,r)),(0,e.createElement)("p",{className:"text-gray-900 mb-0"},(0,s.__)("You can still explore and find great images on Unsplash until your credits reset.","extendify-local")),(0,e.createElement)(t.Button,{href:"https://unsplash.com/",variant:"primary",target:"_blank",className:"text-center justify-center"},(0,s.__)("Search on Unsplash","extendify-local")))),aa=({isGenerating:n,errorMessage:r})=>{const{imageCredits:i,resetImageCredits:o,aiImageOptions:a,setAiImageOption:c}=ea(),u=i.total-i.remaining,[d,h]=(0,l.useState)(0),{size:m,prompt:p}=a;return(0,l.useEffect)((()=>{const e=()=>{h((e=>e+1)),i.refresh&&(new Date(Number(i.refresh))>new Date||o())};0===d&&e();const t=setTimeout(e,1e3);return()=>clearTimeout(t)}),[i,o,d]),(0,e.createElement)(e.Fragment,null,n?null:(0,e.createElement)("div",null,(0,e.createElement)(t.TextareaControl,{id:"draft-ai-image-textarea",placeholder:(0,s.__)("Tell AI about the image you would like to create","extendify-local"),label:(0,s.__)("Image Prompt","extendify-local"),hideLabelFromVision:!0,rows:"7",value:p,onChange:e=>c("prompt",e)}),(0,e.createElement)(t.__experimentalToggleGroupControl,{isBlock:!0,label:(0,s.__)("Aspect Ratio","extendify-local"),onChange:e=>c("size",e),value:m},(0,e.createElement)(t.__experimentalToggleGroupControlOptionIcon,{className:"m-auto",type:"button",icon:ua,label:(0,s.__)("Square: 1:1","extendify-local"),value:"1024x1024"}),(0,e.createElement)(t.__experimentalToggleGroupControlOptionIcon,{className:"m-auto",type:"button",icon:la,label:(0,s.__)("Landscape: 4:3","extendify-local"),value:"1792x1024"}),(0,e.createElement)(t.__experimentalToggleGroupControlOptionIcon,{className:"m-auto",type:"button",icon:ca,label:(0,s.__)("Portrait: 3:4","extendify-local"),value:"1024x1792"}))),r.length>0&&(0,e.createElement)("p",{className:"text-red-500 mb-0"},r),(0,e.createElement)(t.Button,{type:"submit",className:"w-full justify-center",variant:"primary",disabled:n||!p||u>=i.total},n?(0,s.__)("Generating image...","extendify-local"):(0,s.__)("Generate image","extendify-local")),n?(0,e.createElement)(t.Button,{type:"submit",className:"w-full justify-center bg-gray-200 text-gray-800"},(0,s.__)("Cancel","extendify-local")):(0,e.createElement)(oa,{usedCredits:u,total:i.total}))},la=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{padding:"7px 4px"}},(0,e.createElement)("path",{fillRule:"evenodd",d:"M0 1c0-.552285.447715-1 1-1h14c.5523 0 1 .447715 1 1v8c0 .55228-.4477 1-1 1H1c-.552285 0-1-.44772-1-1V1Z",clipRule:"evenodd"})),ca=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{padding:"4px 6px"}},(0,e.createElement)("path",{fillRule:"evenodd",d:"M9.66669 3.5e-7C10.219 3.7e-7 10.6667.447716 10.6667 1v14c0 .5523-.4477 1-1.00001 1h-8c-.55229 0-1.000003-.4477-1.000003-1L.666688 1C.666688.447715 1.1144-2e-8 1.66669 0l8 3.5e-7Z",clipRule:"evenodd"})),ua=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{padding:"6px"}},(0,e.createElement)("path",{fillRule:"evenodd",d:"M11.3333-4e-8c.5523 2e-8 1 .44771504 1 1.00000004v10c0 .5523-.4477 1-1 1H1.33333c-.552283 0-.999998-.4477-.999998-1V.999999C.333332.447715.781047-5e-7 1.33333-4.8e-7L11.3333-4e-8Z",clipRule:"evenodd"})),da=e=>new Promise(((t,n)=>{e.onload=()=>t(e),e.onerror=e=>n(e)})),ha=async(e,t,n,r,i={alt:"",caption:""})=>{let s;await((e,t,n={})=>fetch(`${ta}/api/draft/image/download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,source:t,...n})}))(e,n,{unsplashId:r});try{s=await(async(e,t={})=>{var n,r;const i=new Image;i.src=e,i.crossOrigin="anonymous",await da(i);const s=document.createElement("canvas");s.width=i.width,s.height=i.height;const o=s.getContext("2d");if(!o)return;o.drawImage(i,0,0);const a=await new Promise((e=>{s.toBlob((t=>{t&&e(t)}),"image/jpeg")})),l=new FormData;return l.append("file",new File([a],t.filename)),l.append("alt_text",null!==(n=t.alt)&&void 0!==n?n:""),l.append("caption",null!==(r=t.caption)&&void 0!==r?r:""),l.append("status","publish"),await Io()({path:"wp/v2/media",method:"POST",body:l})})(t,{alt:i.alt,filename:"image.jpg",caption:i.caption})}catch(e){s=await(async(e,t={})=>{var n,r;const i=new FormData;return i.append("source",e),i.append("alt_text",null!==(n=t.alt)&&void 0!==n?n:""),i.append("caption",null!==(r=t.caption)&&void 0!==r?r:""),await Io()({path:"/extendify/v1/draft/upload-image",method:"POST",body:i})})(t,{alt:i.alt,filename:"image.jpg",caption:i.caption})}return s},ma=(e,t,n)=>{if("core/image"===e.name&&n(e.clientId,{id:t.id,caption:t.caption.raw,url:t.source_url,alt:t.alt_text}),"core/media-text"===e.name&&n(e.clientId,{mediaId:t.id,caption:t.caption.raw,mediaUrl:t.source_url,mediaAlt:t.alt_text,mediaType:"image"}),"core/gallery"===e.name){const n=(0,c.createBlock)("core/image",{id:t.id,caption:t.caption.raw,url:t.source_url,alt:t.alt_text});(0,c.insertBlock)(n,null,e.clientId)}"core/cover"===e.name&&n(e.clientId,{id:t.id,url:t.source_url,alt:t.alt_text,backgroundType:"image",dimRatio:50,hasParallax:!1,isDark:!0,isRepeated:!1,layout:{type:"constrained"},tagName:"div",useFeaturedImage:!1})},pa=({prompt:n,size:i,isGenerating:o,id:c,src:u,clearImageResponse:d})=>{const{openGeneralSidebar:h}=(0,a.useDispatch)(r.store),{updateBlockAttributes:m}=(0,a.useDispatch)(w.store),[p,f]=(0,l.useState)(!1),g=(0,a.useSelect)((e=>e(w.store).getSelectedBlock()),[]),[y,v]=i.split("x");return""!==u||o?(0,e.createElement)("div",{className:"flex flex-col gap-5"},(0,e.createElement)(q,null,o?(0,e.createElement)(bo.div,{initial:{opacity:1},exit:{opacity:0},className:"w-full aspect-square flex justify-center items-center",style:{background:"linear-gradient(135deg, #E8E8E8 47.92%, #F3F3F3 60.42%, #E8E8E8 72.92%)"}},(0,e.createElement)(t.Spinner,{style:{height:"48px",width:"48px"}})):(0,e.createElement)(bo.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-gray-100",style:{aspectRatio:Number(y)/Number(v)}},(0,e.createElement)("img",{src:u,className:"w-full block",style:{aspectRatio:Number(y)/Number(v)}}))),o?(0,e.createElement)("p",null,(0,s.__)("Generating your image: ","extendify-local"),(0,e.createElement)("span",{className:"font-bold"},'"',n,'"')):(0,e.createElement)("form",{onSubmit:async e=>{e.preventDefault(),f(!0);const t=await ha(c,u,"ai-generated");t&&(await ma(g,t,m),f(!1),h("edit-post/block"),d())},className:"flex flex-col gap-5"},(0,e.createElement)(t.Button,{type:"submit",autoFocus:!0,className:"w-full justify-center",variant:"primary",disabled:p},p?
// translators: "Importing image" means the image is being added to the WordPress post editor
(0,s.__)("Importing image...","extendify-local"):(0,s.__)("Use this image","extendify-local")),(0,e.createElement)(t.Button,{className:"w-full justify-center bg-gray-200 text-gray-800 disabled:bg-gray-300 disabled:text-gray-700",onClick:d,disabled:p},(0,s.__)("Delete image","extendify-local")))):null},fa=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"12",fill:"none"},(0,e.createElement)("path",{fill:"#1E1E1E",fillRule:"evenodd",d:"M6.445 12.004.986 6l5.46-6.005 1.109 1.01L3.014 6l4.541 4.995-1.11 1.01Z",clipRule:"evenodd"})),ga=zo(Go((e=>({imageDetails:{src:"",id:void 0},setImageDetails:t=>{e((e=>({...e,imageDetails:t})))}})),{name:"Extendify Draft AI Image"}));const ya=[{slug:"ai-image",title:(0,s.__)("AI Image","extendify-local"),component:()=>{const{imageCredits:n,updateImageCredits:r,subtractOneCredit:i,aiImageOptions:o}=ea(),[a,c]=(0,l.useState)(!1),[u,d]=(0,l.useState)(""),h=(0,l.useRef)(null),m=0===n.remaining,{imageDetails:p,setImageDetails:f}=ga(),{goBack:g}=xl();return(0,l.useEffect)((()=>{p.src||a||document.getElementById("draft-ai-image-textarea")?.focus()}),[p.src,a]),(0,e.createElement)(t.Panel,null,(0,e.createElement)("div",{className:"flex gap-1 items-center h-12 pl-1"},(0,e.createElement)("button",{className:"bg-transparent border-0 h-9 w-9 cursor-pointer",onClick:g,type:"button","aria-label":(0,s.__)("Go Back","extendify-local")},fa),(0,e.createElement)(t.__experimentalHeading,{className:"mb-0"},(0,s.__)("AI Image Generator","extendify-local"))),(0,e.createElement)(t.PanelBody,{className:"border-t-0 -mt-4"},(0,e.createElement)(t.BaseControl,{label:(0,s.__)("Image Description","extendify-local")},(0,e.createElement)(pa,{prompt:o.prompt,size:o.size,isGenerating:a,id:p?.id,src:p?.src,clearImageResponse:()=>f({src:"",id:void 0})}),p.src?null:(0,e.createElement)("form",{onSubmit:async e=>{if(e.preventDefault(),d(""),m||a)h.current?.abort();else try{c(!0),i(),h.current=new AbortController;const{imageCredits:e,images:t,id:n}=await(async(e,t)=>{const n=await fetch(`${ta}/api/draft/image`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},signal:t,body:JSON.stringify({...e,globalState:ea.getState(),...ra})}),r=await n.json(),i={remaining:n.headers.get("x-ratelimit-remaining"),total:n.headers.get("x-ratelimit-limit"),refresh:n.headers.get("x-ratelimit-reset")};if(!n.ok){if(r.status&&"content-policy-violation"===r.status)throw{message:(0,s.__)("Your request was rejected as a result of our safety system. Your prompt may contain text that is not allowed by our safety system.","extendify-local"),imageCredits:i};throw{message:(0,s.__)("Service temporarily unavailable","extendify-local"),imageCredits:i}}return{images:r,imageCredits:i,id:n.headers.get("x-request-id")}})(o,h.current.signal);r(e),f({src:t[0].url,id:n})}catch(e){if(20===e?.code)return;if(!e?.imageCredits)return await new Promise((e=>setTimeout(e,1e3))),d(e.message),void r({remaining:n.remaining});r(e.imageCredits),d(e.message)}finally{c(!1)}},className:"flex flex-col gap-5"},(0,e.createElement)(aa,{isGenerating:a,errorMessage:u})))))}}],va=[{slug:"home",title:(0,s.__)("Home","extendify-local"),component:()=>{const{navigateTo:n}=xl();return(0,e.createElement)(t.PanelBody,null,(0,e.createElement)(t.BaseControl,{id:"extendify-draft-image-gen",label:(0,s.__)("AI Image Generator","extendify-local"),help:(0,s.__)("Use AI to generate custom images based on your description.","extendify-local")},(0,e.createElement)(t.Button,{variant:"primary",className:"justify-center w-full",onClick:()=>n("ai-image")},(0,s.__)("Add a prompt","extendify-local"))),(0,e.createElement)(t.__experimentalSpacer,{marginY:"5"}),(0,e.createElement)(t.__experimentalDivider,null),(0,e.createElement)(t.BaseControl,{id:"extendify-draft-image-stock-photos",label:(0,s.__)("Discover Stock Photos","extendify-local"),help:(0,s.__)("Search and add free stock photos from Unsplash.com","extendify-local")},(0,e.createElement)(t.Button,{variant:"primary",className:"justify-center w-full",onClick:()=>n("unsplash")},(0,s.__)("Search Unsplash","extendify-local"))))}}],xa=({image:n,skeletonHeight:r,isInsertingImage:i,onClick:s})=>{const[o,a]=(0,l.useState)(""),[c,u]=(0,l.useState)(!1),d=n?.width?Number(n?.width)/Number(n?.height):122/r;return(0,l.useEffect)((()=>{if(!n?.user?.links?.html)return void a("");const e=new URL(n.user.links.html);e.searchParams.set("utm_source","extendify"),e.searchParams.set("utm_medium","referral"),a(e.toString())}),[n]),(0,l.useInsertionEffect)((()=>{if(!n?.urls||c)return;const e=new Image;e.src=n.urls.thumb||n.urls.small,da(e).then((()=>u(!0)))}),[n,c]),(0,e.createElement)(bo.div,{className:"relative mb-1",initial:{aspectRatio:d},animate:{aspectRatio:d}},(0,e.createElement)(q,null,c?null:(0,e.createElement)(bo.div,{className:"absolute inset-0 z-10 bg-white",initial:{opacity:1},animate:{opacity:1},exit:{opacity:0}},(0,e.createElement)("div",{className:"absolute inset-0 z-10 animate-pulse bg-gray-150"}))),(0,e.createElement)("div",{className:"group relative"},(0,e.createElement)("button",{type:"button",className:V()("border-0 p-0 relative block",{"bg-transparent cursor-pointer":!i,"bg-black":i}),onClick:()=>s(n),disabled:i},i&&i?.id===n?.id&&(0,e.createElement)("div",{className:"absolute inset-0 flex justify-center items-center"},(0,e.createElement)(t.Spinner,{style:{height:"24px",width:"24px"}})),(0,e.createElement)("img",{src:n?.urls?.thumb||n?.urls?.small,className:V()("block transition-opacity duration-300",{"opacity-50":i}),alt:n?.alt_description})),n?.user?.name&&o?(0,e.createElement)("a",{href:o,target:"_blank",className:V()("text-white no-underline absolute bottom-1 bg-black/70 px-1 opacity-0",{"group-hover:opacity-100 group-focus-within:opacity-100":!i}),rel:"noopener noreferrer"},`${n.user?.name}`):null))},wa=({imageData:t,isInsertingImage:n,onClick:r,loading:i})=>{var o;const a=null!==(o=t?.images?.length)&&void 0!==o?o:10;return i||t.images.length?(0,e.createElement)("div",{className:"gap-1 columns-2"},Array.from({length:a}).map(((i,s)=>{var o;const a=[150,175,200];return(0,e.createElement)(xa,{key:null!==(o=t?.images?.[s]?.id)&&void 0!==o?o:s,image:t?.images?.[s],skeletonHeight:a[s%a.length],isInsertingImage:n,onClick:r})}))):(0,s.__)("No images found.","extendify-local")};var Ea=n(688);const ba=()=>{},Sa=ba(),Pa=Object,Ca=e=>e===Sa,Ta=e=>"function"==typeof e,Va=(e,t)=>({...e,...t}),La=new WeakMap;let ka=0;const Ma=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let i,s;if(Pa(e)!==e||r||n==RegExp)i=r?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(i=La.get(e),i)return i;if(i=++ka+"~",La.set(e,i),n==Array){for(i="@",s=0;s<e.length;s++)i+=Ma(e[s])+",";La.set(e,i)}if(n==Pa){i="#";const t=Pa.keys(e).sort();for(;!Ca(s=t.pop());)Ca(e[s])||(i+=s+":"+Ma(e[s])+",");La.set(e,i)}}return i},Aa=new WeakMap,_a={},Da={},Ia="undefined",Ra=typeof window!=Ia,Ba=typeof document!=Ia,Oa=(e,t)=>{const n=Aa.get(e);return[()=>!Ca(t)&&e.get(t)||_a,r=>{if(!Ca(t)){const i=e.get(t);t in Da||(Da[t]=i),n[5](t,Va(i,r),i||_a)}},n[6],()=>!Ca(t)&&t in Da?Da[t]:!Ca(t)&&e.get(t)||_a]};let ja=!0;const[Fa,Na]=Ra&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ba,ba],Ha={isOnline:()=>ja,isVisible:()=>{const e=Ba&&document.visibilityState;return Ca(e)||"hidden"!==e}},za={initFocus:e=>(Ba&&document.addEventListener("visibilitychange",e),Fa("focus",e),()=>{Ba&&document.removeEventListener("visibilitychange",e),Na("focus",e)}),initReconnect:e=>{const t=()=>{ja=!0,e()},n=()=>{ja=!1};return Fa("online",t),Fa("offline",n),()=>{Na("online",t),Na("offline",n)}}},Ua=!e.useId,$a=!Ra||"Deno"in window,Ga=$a?e.useEffect:e.useLayoutEffect,Za="undefined"!=typeof navigator&&navigator.connection,Wa=!$a&&Za&&(["slow-2g","2g"].includes(Za.effectiveType)||Za.saveData),qa=e=>{if(Ta(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?Ma(e):"",t]};let Ka=0;const Ya=()=>++Ka;async function Xa(...e){const[t,n,r,i]=e,s=Va({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{});let o=s.populateCache;const a=s.rollbackOnError;let l=s.optimisticData;const c=s.throwOnError;if(Ta(n)){const e=n,r=[],i=t.keys();for(const n of i)!/^\$(inf|sub)\$/.test(n)&&e(t.get(n)._k)&&r.push(n);return Promise.all(r.map(u))}return u(n);async function u(n){const[i]=qa(n);if(!i)return;const[u,d]=Oa(t,i),[h,m,p,f]=Aa.get(t),g=()=>{const e=h[i];return(Ta(s.revalidate)?s.revalidate(u().data,n):!1!==s.revalidate)&&(delete p[i],delete f[i],e&&e[0])?e[0](2).then((()=>u().data)):u().data};if(e.length<3)return g();let y,v=r;const x=Ya();m[i]=[x,0];const w=!Ca(l),E=u(),b=E.data,S=E._c,P=Ca(S)?b:S;if(w&&(l=Ta(l)?l(P,b):l,d({data:l,_c:P})),Ta(v))try{v=v(P)}catch(e){y=e}if(v&&Ta(v.then)){if(v=await v.catch((e=>{y=e})),x!==m[i][0]){if(y)throw y;return v}y&&w&&(e=>"function"==typeof a?a(e):!1!==a)(y)&&(o=!0,d({data:P,_c:Sa}))}if(o&&!y)if(Ta(o)){const e=o(v,P);d({data:e,error:Sa,_c:Sa})}else d({data:v,error:Sa,_c:Sa});if(m[i][1]=Ya(),Promise.resolve(g()).then((()=>{d({_c:Sa})})),!y)return v;if(c)throw y}}const Ja=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Qa=(e,t)=>{if(!Aa.has(e)){const n=Va(za,t),r={},i=Xa.bind(Sa,e);let s=ba;const o={},a=(e,t)=>{const n=o[e]||[];return o[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},l=(t,n,r)=>{e.set(t,n);const i=o[t];if(i)for(const e of i)e(n,r)},c=()=>{if(!Aa.has(e)&&(Aa.set(e,[r,{},{},{},i,l,a]),!$a)){const t=n.initFocus(setTimeout.bind(Sa,Ja.bind(Sa,r,0))),i=n.initReconnect(setTimeout.bind(Sa,Ja.bind(Sa,r,1)));s=()=>{t&&t(),i&&i(),Aa.delete(e)}}};return c(),[e,i,c,s]}return[e,Aa.get(e)[4]]},[el,tl]=Qa(new Map),nl=Va({onLoadingSlow:ba,onSuccess:ba,onError:ba,onErrorRetry:(e,__,t,n,r)=>{const i=t.errorRetryCount,s=r.retryCount,o=~~((Math.random()+.5)*(1<<(s<8?s:8)))*t.errorRetryInterval;!Ca(i)&&s>i||setTimeout(n,o,r)},onDiscarded:ba,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Wa?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:Wa?5e3:3e3,compare:(e,t)=>Ma(e)==Ma(t),isPaused:()=>!1,cache:el,mutate:tl,fallback:{}},Ha),rl=(e,t)=>{const n=Va(e,t);if(t){const{use:r,fallback:i}=e,{use:s,fallback:o}=t;r&&s&&(n.use=r.concat(s)),i&&o&&(n.fallback=Va(i,o))}return n},il=(0,e.createContext)({}),sl=Ra&&window.__SWR_DEVTOOLS_USE__,ol=sl?window.__SWR_DEVTOOLS_USE__:[],al=e=>Ta(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],ll=ol.concat((e=>(t,n,r)=>e(t,n&&((...e)=>{const[r]=qa(t),[,,,i]=Aa.get(el);if(r.startsWith("$inf$"))return n(...e);const s=i[r];return Ca(s)?n(...e):(delete i[r],s)}),r)));sl&&(window.__SWR_DEVTOOLS_REACT__=e);const cl=e.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),ul={dedupe:!0};Pa.defineProperty((t=>{const{value:n}=t,r=(0,e.useContext)(il),i=Ta(n),s=(0,e.useMemo)((()=>i?n(r):n),[i,r,n]),o=(0,e.useMemo)((()=>i?s:rl(r,s)),[i,r,s]),a=s&&s.provider,l=(0,e.useRef)(Sa);a&&!l.current&&(l.current=Qa(a(o.cache||el),s));const c=l.current;return c&&(o.cache=c[0],o.mutate=c[1]),Ga((()=>{if(c)return c[2]&&c[2](),c[3]}),[]),(0,e.createElement)(il.Provider,Va(t,{value:o}))}),"defaultValue",{value:nl});const dl=(hl=(t,n,r)=>{const{cache:i,compare:s,suspense:o,fallbackData:a,revalidateOnMount:l,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:h,keepPreviousData:m}=r,[p,f,g,y]=Aa.get(i),[v,x]=qa(t),w=(0,e.useRef)(!1),E=(0,e.useRef)(!1),b=(0,e.useRef)(v),S=(0,e.useRef)(n),P=(0,e.useRef)(r),C=()=>P.current,T=()=>C().isVisible()&&C().isOnline(),[V,L,k,M]=Oa(i,v),A=(0,e.useRef)({}).current,_=Ca(a)?r.fallback[v]:a,D=(e,t)=>{for(const n in A){const r=n;if("data"===r){if(!s(e[r],t[r])){if(!Ca(e[r]))return!1;if(!s(z,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},I=(0,e.useMemo)((()=>{const e=!!v&&!!n&&(Ca(l)?!C().isPaused()&&!o&&(!!Ca(c)||c):l),t=t=>{const n=Va(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=V(),i=M(),s=t(r),a=r===i?s:t(i);let u=s;return[()=>{const e=t(V());return D(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>a]}),[i,v]),R=(0,Ea.useSyncExternalStore)((0,e.useCallback)((e=>k(v,((t,n)=>{D(n,t)||e()}))),[i,v]),I[0],I[1]),B=!w.current,O=p[v]&&p[v].length>0,j=R.data,F=Ca(j)?_:j,N=R.error,H=(0,e.useRef)(F),z=m?Ca(j)?H.current:j:F,U=!(O&&!Ca(N))&&(B&&!Ca(l)?l:!C().isPaused()&&(o?!Ca(F)&&c:Ca(F)||c)),$=!!(v&&n&&B&&U),G=Ca(R.isValidating)?$:R.isValidating,Z=Ca(R.isLoading)?$:R.isLoading,W=(0,e.useCallback)((async e=>{const t=S.current;if(!v||!t||E.current||C().isPaused())return!1;let n,i,o=!0;const a=e||{},l=!g[v]||!a.dedupe,c=()=>Ua?!E.current&&v===b.current&&w.current:v===b.current,u={isValidating:!1,isLoading:!1},d=()=>{L(u)},h=()=>{const e=g[v];e&&e[1]===i&&delete g[v]},m={isValidating:!0};Ca(V().data)&&(m.isLoading=!0);try{if(l&&(L(m),r.loadingTimeout&&Ca(V().data)&&setTimeout((()=>{o&&c()&&C().onLoadingSlow(v,r)}),r.loadingTimeout),g[v]=[t(x),Ya()]),[n,i]=g[v],n=await n,l&&setTimeout(h,r.dedupingInterval),!g[v]||g[v][1]!==i)return l&&c()&&C().onDiscarded(v),!1;u.error=Sa;const e=f[v];if(!Ca(e)&&(i<=e[0]||i<=e[1]||0===e[1]))return d(),l&&c()&&C().onDiscarded(v),!1;const a=V().data;u.data=s(a,n)?a:n,l&&c()&&C().onSuccess(n,v,r)}catch(e){h();const t=C(),{shouldRetryOnError:n}=t;t.isPaused()||(u.error=e,l&&c()&&(t.onError(e,v,t),(!0===n||Ta(n)&&n(e))&&(C().revalidateOnFocus&&C().revalidateOnReconnect&&!T()||t.onErrorRetry(e,v,t,(e=>{const t=p[v];t&&t[0]&&t[0](3,e)}),{retryCount:(a.retryCount||0)+1,dedupe:!0}))))}return o=!1,d(),!0}),[v,i]),q=(0,e.useCallback)(((...e)=>Xa(i,b.current,...e)),[]);if(Ga((()=>{S.current=n,P.current=r,Ca(j)||(H.current=j)})),Ga((()=>{if(!v)return;const e=W.bind(Sa,ul);let t=0;const n=((e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}})(v,p,((n,r={})=>{if(0==n){const n=Date.now();C().revalidateOnFocus&&n>t&&T()&&(t=n+C().focusThrottleInterval,e())}else if(1==n)C().revalidateOnReconnect&&T()&&e();else{if(2==n)return W();if(3==n)return W(r)}}));return E.current=!1,b.current=v,w.current=!0,L({_k:x}),U&&(Ca(F)||$a?e():(r=e,Ra&&typeof window.requestAnimationFrame!=Ia?window.requestAnimationFrame(r):setTimeout(r,1))),()=>{E.current=!0,n()};var r}),[v]),Ga((()=>{let e;function t(){const t=Ta(u)?u(V().data):u;t&&-1!==e&&(e=setTimeout(n,t))}function n(){V().error||!d&&!C().isVisible()||!h&&!C().isOnline()?t():W(ul).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[u,d,h,v]),(0,e.useDebugValue)(z),o&&Ca(F)&&v){if(!Ua&&$a)throw new Error("Fallback data is required when using suspense in SSR.");S.current=n,P.current=r,E.current=!1;const e=y[v];if(!Ca(e)){const t=q(e);cl(t)}if(!Ca(N))throw N;{const e=W(ul);Ca(z)||(e.status="fulfilled",e.value=!0),cl(e)}}return{mutate:q,get data(){return A.data=!0,z},get error(){return A.error=!0,N},get isValidating(){return A.isValidating=!0,G},get isLoading(){return A.isLoading=!0,Z}}},function(...t){const n=Va(nl,(0,e.useContext)(il)),[r,i,s]=al(t),o=rl(n,s);let a=hl;const{use:l}=o,c=(l||[]).concat(ll);for(let e=c.length;e--;)a=c[e](a);return a(r,i||o.fetcher||null,o)});var hl;const ml=((e,t)=>(...n)=>{const[r,i,s]=al(n),o=(s.use||[]).concat(t);return e(r,i,{...s,use:o})})(dl,(e=>(t,n,r)=>(r.revalidateOnFocus=!1,r.revalidateIfStale=!1,r.revalidateOnReconnect=!1,e(t,n,r)))),pl=[{slug:"unsplash",title:(0,s.__)("Unsplash","extendify-local"),component:()=>{const{goBack:n}=xl(),[r,i]=(0,l.useState)(""),[o,c]=(0,l.useState)(""),[u,d]=(0,l.useState)(!1),{data:h,loading:m}=(e=>{const{data:t,error:n}=ml(e||"unsplash",ia);return{data:t,error:n,loading:!t&&!n}})(o),[p,f]=(0,l.useState)(null),g=(0,a.useSelect)((e=>e(w.store).getSelectedBlock()),[]),{updateBlockAttributes:y}=(0,a.useDispatch)(w.store);return(0,l.useEffect)((()=>{d(!1)}),[o]),(0,l.useEffect)((()=>{if(!r)return c("");const e=setTimeout((()=>c(r)),300);return()=>clearTimeout(e)}),[r]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"flex gap-1 items-center h-12 pl-1"},(0,e.createElement)("button",{className:"bg-transparent border-0 h-9 w-9 cursor-pointer",onClick:n,type:"button","aria-label":(0,s.__)("Go Back","extendify-local")},fa),(0,e.createElement)(t.__experimentalHeading,{className:"mb-0"},(0,s.__)("Photos from Unsplash","extendify-local"))),(0,e.createElement)(t.__experimentalDivider,{className:"my-0 border-gray-150"}),(0,e.createElement)("div",{className:"p-4 flex flex-col gap-2"},(0,e.createElement)(t.SearchControl,{autoFocus:!0,className:V()({"opacity-50 pointer-events-none bg-gray-150":p}),disabled:p,"aria-disabled":p,onChange:e=>{p||i(e)},value:r}),(0,e.createElement)(wa,{imageData:h,isInsertingImage:p,onClick:async e=>{if(!p){f(e);try{const t=await ha(h.requestID,e.urls?.regular,"unsplash",e.id);await ma(g,t,y)}catch(e){console.log(e)}finally{f(null)}}},loading:m||u})))}}],fl=[...va,...ya,...pl],gl="/extendify/v1/draft/router-data",yl={getItem:async()=>await Io()({path:gl}),setItem:async(e,t)=>await Io()({path:gl,method:"POST",data:{state:t}})},vl=zo(Ko(Go(((e,t)=>({history:[],viewedPages:[],current:null,goBack:()=>{t().history.length<2||e((e=>({history:e.history.slice(1),current:t().history[1]})))},setCurrent:n=>{n&&t().history[0]?.slug!==n.slug&&e((e=>{const t=(new Date).toISOString(),r=t,i=e.viewedPages.find((e=>e.slug===n.slug));return{history:[n,...e.history].filter(Boolean),current:n,viewedPages:[...e.viewedPages.filter((e=>e.slug!==n.slug)),i?{...i,count:i.count+1,lastViewedAt:t}:{slug:n.slug,firstViewedAt:r,lastViewedAt:t,count:1}]}}))}})),{name:"Extendify Draft Router"}),{name:"extendify-draft-router",storage:Wo((()=>yl)),skipHydration:!0,partialize:({viewedPages:e})=>({viewedPages:e})})),xl=()=>{var t;const{current:n,setCurrent:r,history:i,goBack:s}=vl(),o=null!==(t=n?.component)&&void 0!==t?t:()=>null;return(0,l.useEffect)((()=>{n||r(fl[0])}),[n,r]),{current:n,CurrentPage:(0,l.useCallback)((()=>(0,e.createElement)("div",{role:"region","aria-live":"polite",className:"h-full"},(0,e.createElement)("h1",{className:"sr-only"},n?.title),(0,e.createElement)(o,null))),[n]),navigateTo:e=>{const t=fl.find((t=>t.slug===e));r(null!=t?t:fl[0])},goBack:s,history:i}},wl=({setUserGaveConsent:t})=>{const{consentTermsHTML:n}=window.extSharedData;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"p-6"},(0,e.createElement)("h2",{className:"mb-2 mt-0 text-lg"},(0,s.__)("Terms of Use","extendify-local")),(0,e.createElement)("p",{className:"m-0",dangerouslySetInnerHTML:{__html:n}}),(0,e.createElement)("button",{className:"bg-wp-theme-main mt-4 w-full cursor-pointer rounded border-0 px-4 py-2 text-center text-white",type:"button",onClick:()=>(async()=>{t(!0),window.extSharedData.userGaveConsent="1",await Io()({path:"/extendify/v1/shared/update-user-meta",method:"POST",data:{option:"ai_consent",value:!0}})})(),"data-test":"draft-terms-button"},(0,s.__)("Accept","extendify-local"))))},El=()=>{var n;const{selectedText:r}=E(),[i,o]=(0,l.useState)(""),[c,d]=(0,l.useState)(!1),[h,p]=(0,l.useState)({text:"",promptType:"",systemMessageKey:"",details:{}}),{completion:f,loading:g,error:y}=((e,t,n,r)=>{const[i,o]=(0,l.useState)(""),[a,c]=(0,l.useState)(null),[u,d]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{let i,a=!1;const l=new TextDecoder;return e?((async()=>{o(""),c(!1),d(!0);const u=await(async(e,t,n,r)=>{const i=await fetch(`${ta}/api/draft/completion`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,promptType:t,systemMessageKey:n,details:r,globalState:ea.getState(),...ra})});if(!i.ok)throw new Error((0,s.__)("Service temporarily unavailable","extendify-local"));return i})(e,t,n,r);i=u.body.getReader();let h=!1;for(;!h;){const{value:e,done:t}=await i.read();if(h=t,e&&!a){const t=l.decode(e);o((e=>e+t))}}})().finally((()=>{a||d(!1)})).catch((e=>{a||c(e)})),()=>{a=!0,i&&i.cancel()}):(d(!1),o(""),void(a=!0))}),[e,n,t,r]),{completion:i,error:a,loading:u}})(h.text,h.promptType,h.systemMessageKey,h.details),v=(0,a.useSelect)((e=>e("core/block-editor").getSelectedBlockClientIds()),[]),{getBlock:x}=(0,a.useSelect)((e=>e("core/block-editor")),[]),{showAIConsent:w,userGaveConsent:b}=window.extSharedData,{CurrentPage:S}=xl(),[C,T]=(0,l.useState)(b),V=w&&!C;(0,l.useEffect)((()=>{const e=e=>{V||p(e.detail)};return window.addEventListener("extendify-draft:set-prompt",e),()=>window.removeEventListener("extendify-draft:set-prompt",e)}),[V]),(0,l.useEffect)((()=>{y&&o(h.text)}),[y,h.text]);const L=()=>{if(0===v.length)return!1;const e=x(v[0]);return!!e&&void 0!==e?.attributes?.content&&""!==e?.attributes?.content};return V?(0,e.createElement)(wl,{setUserGaveConsent:T}):(()=>{if(0===v.length)return!1;const e=x(v[0]);return!!e&&["core/image","core/media-text","core/gallery","core/cover"].includes(e.name)})()?(0,e.createElement)(S,null):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.Panel,null,(0,e.createElement)(t.PanelBody,null,r&&(0,e.createElement)(_o,{loading:g}),(0,e.createElement)("div",{className:"rounded-sm border-none bg-gray-100 overflow-hidden mb-4"},!f&&(0,e.createElement)(Po,{inputText:i,setInputText:o,ready:c,setReady:d,setPrompt:p,loading:g}),f&&(0,e.createElement)(u,{completion:f}),y&&(0,e.createElement)("div",{className:"px-4 mb-4 mt-2"},(0,e.createElement)("p",{className:"m-0 text-xs font-semibold text-red-500"},y.message))),(f||g)&&!y&&(0,e.createElement)(Mo,{prompt:h,completion:f,setPrompt:p,setInputText:o,loading:g}),!g&&!f&&L()&&(0,e.createElement)(t.BaseControl,null,(0,e.createElement)(P,{completion:f,disabled:g,setInputText:o,setPrompt:p})),!g&&!f&&!L()&&(0,e.createElement)(t.BaseControl,{label:(0,s.__)("Suggested prompts","extendify-local")},(0,e.createElement)(m,{disabled:g,setInputText:o,setReady:d})))),window.extSharedData?.devbuild&&(0,e.createElement)(t.Panel,null,(0,e.createElement)(t.PanelBody,{title:"Debug",initialOpen:!1},(0,e.createElement)("label",null,"prompt text:"),(0,e.createElement)("pre",{className:"whitespace-pre-wrap"},h.text),(0,e.createElement)("label",null,"prompt system message:"),(0,e.createElement)("pre",{className:"whitespace-pre-wrap"},h.systemMessageKey),(0,e.createElement)("label",null,"completion:"),(0,e.createElement)("pre",{className:"whitespace-pre-wrap"},f),(0,e.createElement)("label",null,"error:"),(0,e.createElement)("pre",{className:"whitespace-pre-wrap"},null!==(n=y?.message)&&void 0!==n?n:""),(0,e.createElement)("label",null,"loading: ",g?(0,e.createElement)("span",null,"true"):(0,e.createElement)("span",null,"false")))))},bl=(e,t)=>"function"==typeof l.createRoot?(0,l.createRoot)(t).render(e):((0,l.render)(e,t),{unmount:()=>{(0,l.unmountComponentAtNode)(t)}}),Sl=["core/image","core/media-text","core/gallery","core/cover"],Pl=({name:n,attributes:i})=>{const{openGeneralSidebar:o}=(0,a.useDispatch)(r.store);return(0,l.useEffect)((()=>{if(!Sl.includes(n))return;let r,i,a,l,c;return(async()=>{await new Promise((e=>l=requestAnimationFrame(e)));const n=Array.from(document.querySelectorAll('[data-toolbar-item="true"]'))?.find((e=>e.textContent===(0,s.__)("Replace")||e.textContent===(0,s.__)("Add")));if(!n)return;const u=(0,e.createElement)(t.MenuItem,{icon:b,onClick:async()=>{o("extendify-draft/draft"),await new Promise((e=>requestAnimationFrame(e))),document.getElementById("draft-ai-image-textarea")?.focus()}},(0,s.__)("Get Personalized Image","extendify-local"));c=new MutationObserver((e=>{if("true"===e[0].target.getAttribute("aria-expanded")){const e=".block-editor-media-replace-flow__media-upload-menu",t=document.querySelector(e);if(!t)return;return r=document.createElement("div"),t.prepend(r),void(a=requestAnimationFrame((()=>{i=bl(u,r)})))}cancelAnimationFrame(a),i?.unmount(),r?.remove()})),c.observe(n,{attributes:!0,childList:!1,subtree:!1})})(),()=>{[a,l].forEach(cancelAnimationFrame),i?.unmount(),r?.remove(),c?.disconnect()}}),[n,i,o]),null},Cl=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z"})),Tl=(0,e.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(d.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})),Vl=({text:n,closePopup:r,openDraft:i,updatePrompt:o})=>{const a=[{language:(0,s.__)("Catalan","extendify-local"),code:"ca"},{language:(0,s.__)("Danish","extendify-local"),code:"da_DK"},{language:(0,s.__)("Dutch","extendify-local"),code:"nl_NL"},{language:(0,s.__)("Dutch (Belgium)","extendify-local"),code:"de_BE"},{language:(0,s.__)("English","extendify-local"),code:"en"},{language:(0,s.__)("Estonian","extendify-local"),code:"et"},{language:(0,s.__)("Finnish","extendify-local"),code:"fi"},{language:(0,s.__)("French (Belgium)","extendify-local"),code:"fr_BE"},{language:(0,s.__)("French (France)","extendify-local"),code:"fr_FR"},{language:(0,s.__)("German","extendify-local"),code:"de_DE"},{language:(0,s.__)("German (Switzerland)","extendify-local"),code:"de_CH"},{language:(0,s.__)("Indonesian","extendify-local"),code:"id_ID"},{language:(0,s.__)("Italian","extendify-local"),code:"it_IT"},{language:(0,s.__)("Japanese","extendify-local"),code:"jp"},{language:(0,s.__)("Polish","extendify-local"),code:"pl_PL"},{language:(0,s.__)("Portuguese (Brazil)","extendify-local"),code:"pt_BR"},{language:(0,s.__)("Portuguese (Portugal)","extendify-local"),code:"pt_PT"},{language:(0,s.__)("Spanish (Spain)","extendify-local"),code:"es_ES"},{language:(0,s.__)("Swedish","extendify-local"),code:"sv_SE"},{language:(0,s.__)("Ukrainian","extendify-local"),code:"uk"},{language:(0,s.__)("Vietnamese","extendify-local"),code:"vi"}];return(0,e.createElement)(t.Dropdown,{className:"my-container-class-name flex items-center justify-between w-full",contentClassName:"my-dropdown-content-classname",popoverProps:{placement:"right-start"},renderToggle:({isOpen:n,onToggle:r})=>(0,e.createElement)("div",{className:"group flex items-center justify-between w-full hover:text-design-main"},(0,e.createElement)(t.MenuItem,{className:"w-full flex justify-between",icon:Cl,iconPosition:"left",variant:void 0,onClick:r,"aria-expanded":n},(0,s.__)("Translate","extendify-local")),(0,e.createElement)(p,{icon:Tl,size:24,className:"group-hover:text-current fill-current"})),renderContent:()=>(0,e.createElement)(t.MenuGroup,{className:"extendify-draft",label:(0,e.createElement)("div",{className:"flex items-center gap-2"},(0,e.createElement)(p,{className:"fill-gray-900",size:16,icon:b}),(0,s.__)("Translate to...","extendify-local"))},a.map((({language:s,code:a,promptType:l="translate",systemMessageKey:c="edit"})=>(0,e.createElement)(t.MenuItem,{key:`${l}-${a}-${c}`,style:{width:"100%"},isSelected:!1,disabled:!1,variant:void 0,onClick:()=>{i?.(),r?.(),window.requestAnimationFrame((()=>window.requestAnimationFrame((()=>o({text:n,promptType:l,systemMessageKey:c,details:{languageInto:s}})))))}},s))))})},Ll=["core/paragraph","core/list-item","core/verse","core/preformatted","core/heading"],kl=(n,i)=>{const{clientId:o}=i,{getBlockName:l,getBlock:c}=(0,a.useSelect)((e=>e(w.store)),[]),{getActiveGeneralSidebarName:u}=(0,a.useSelect)((e=>e(r.store)),[]),{openGeneralSidebar:d}=(0,a.useDispatch)(r.store);if(!Ll.includes(l(o)))return(0,e.createElement)(n,{...i});const h=c(o)?.attributes?.content||"",m=()=>d("extendify-draft/draft"),p=e=>window.dispatchEvent(new CustomEvent("extendify-draft:set-prompt",{detail:e}));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n,{...i}),(0,e.createElement)(w.BlockControls,null,(0,e.createElement)(t.ToolbarGroup,{className:"extendify-draft"},(0,e.createElement)(t.Dropdown,{renderContent:({onClose:t})=>(0,e.createElement)(Ml,{text:h,closePopup:t,openDraft:m,updatePrompt:p}),renderToggle:({isOpen:n,onToggle:r})=>(0,e.createElement)(t.ToolbarButton,{onClick:()=>{if(!h)return"extendify-draft/draft"===u()?d("edit-post/block"):m();r()},"aria-expanded":n,"aria-haspopup":"true",icon:b},(0,s.__)("Ask AI","extendify-local"))}))))},Ml=({text:n,closePopup:r,openDraft:i,updatePrompt:o})=>{const a=[{label:(0,s.__)("Improve writing","extendify-local"),promptType:"improve-writing",systemMessageKey:"edit",icon:(0,e.createElement)(p,{icon:f}),disabled:()=>!1},{label:(0,s.__)("Fix spelling & grammar","extendify-local"),promptType:"fix-spelling-grammar",systemMessageKey:"edit",icon:(0,e.createElement)(p,{icon:g}),disabled:()=>!1},{label:(0,s.__)("Simplify language","extendify-local"),promptType:"simplify-language",systemMessageKey:"edit",icon:(0,e.createElement)(p,{icon:y}),disabled:()=>!1},{label:(0,s.__)("Make shorter","extendify-local"),promptType:"make-shorter",systemMessageKey:"edit",icon:(0,e.createElement)(p,{icon:S}),disabled:()=>!1},{label:(0,s.__)("Make longer","extendify-local"),promptType:"make-longer",systemMessageKey:"edit",icon:(0,e.createElement)(p,{icon:v}),disabled:()=>!1}];return(0,e.createElement)(t.NavigableMenu,{orientation:"vertical",role:"menu",style:{minWidth:"200px"}},(0,e.createElement)(t.MenuGroup,{className:"extendify-draft"},(0,e.createElement)(t.MenuItem,{key:"custom-prompt",style:{width:"100%"},isSelected:!1,disabled:!1,iconPosition:"left",icon:b,variant:void 0,onClick:()=>{i?.(),r?.(),window.requestAnimationFrame((()=>window.requestAnimationFrame((()=>document.getElementById("draft-ai-textarea").focus()))))}},(0,s.__)("Custom prompt","extendify-local")),a.map((({label:s,promptType:a,systemMessageKey:l,disabled:c,icon:u})=>(0,e.createElement)(t.MenuItem,{key:`${a}-${a}-${l}`,style:{width:"100%"},isSelected:!1,disabled:c(),iconPosition:"left",icon:u,variant:void 0,onClick:()=>{i?.(),r?.(),window.requestAnimationFrame((()=>window.requestAnimationFrame((()=>o({text:n,promptType:a,systemMessageKey:l})))))}},s))),(0,e.createElement)(Vl,{text:n,closePopup:r,openDraft:i,updatePrompt:o})))};(0,o.registerPlugin)("extendify-draft",{render:()=>(0,e.createElement)(Al,null,(0,e.createElement)(r.PluginSidebarMoreMenuItem,{target:"draft"},(0,s.__)("Draft","extendify-local")),(0,e.createElement)(r.PluginSidebar,{name:"draft",icon:b,title:(0,s.__)("AI Tools","extendify-local"),className:"extendify-draft h-full"},(0,e.createElement)(t.Flex,{direction:"column",expanded:!0,justify:"space-between"},(0,e.createElement)(t.FlexBlock,null,(0,e.createElement)(El,null)))))});const Al=({children:e})=>e;(0,i.addFilter)("editor.BlockEdit","extendify-draft/draft-toolbar",(e=>t=>kl(e,t))),(0,i.addFilter)("editor.BlockEdit","extendify-draft/draft-image",(n=>i=>((n,i)=>{const{openGeneralSidebar:o}=(0,a.useDispatch)(r.store),{clientId:c,name:u}=i;return(0,l.useEffect)((()=>{if(!Sl.includes(u))return;const n=document.querySelector('iframe[name="editor-canvas"]')?.contentDocument,r=n?n.querySelector(`[data-block="${c}"]`):document.querySelector(`[data-block="${c}"]`);if(!r)return;const i=Object.assign(document.createElement("div"),{className:"components-form-file-upload"});let a;r.querySelector(".block-editor-media-placeholder .components-form-file-upload")?.after(i);const l=(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.Button,{variant:"primary",onClick:async()=>{o("extendify-draft/draft"),await new Promise((e=>requestAnimationFrame(e))),document.getElementById("draft-ai-image-textarea")?.focus()}},(0,s.__)("Get Personalized Image","extendify-local")),(0,e.createElement)("span",{"aria-hidden":"true"})),d=requestAnimationFrame((()=>{a=bl(l,i)}));return()=>{cancelAnimationFrame(d),a?.unmount(),i?.remove()}}),[c,o,u]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n,{...i}),(0,e.createElement)(w.BlockControls,null,(0,e.createElement)(Pl,{...i})))})(n,i)))})()})();